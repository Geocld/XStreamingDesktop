!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("electron-serve"),require("electron-store"),require("debug"),require("ip-address"),require("axios"),require("compare-versions"),require("github-url-to-object"),require("jose"),require("uuid-1345"),require("xbox-webapi"));else if("function"==typeof define&&define.amd)define(["electron-serve","electron-store","debug","ip-address","axios","compare-versions","github-url-to-object","jose","uuid-1345","xbox-webapi"],e);else{var r="object"==typeof exports?e(require("electron-serve"),require("electron-store"),require("debug"),require("ip-address"),require("axios"),require("compare-versions"),require("github-url-to-object"),require("jose"),require("uuid-1345"),require("xbox-webapi")):e(t["electron-serve"],t["electron-store"],t.debug,t["ip-address"],t.axios,t["compare-versions"],t["github-url-to-object"],t.jose,t["uuid-1345"],t["xbox-webapi"]);for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(global,(t,e,r,n,s,o,i,a,c,u)=>(()=>{var l={2742:t=>{"use strict";t.exports=s},7831:t=>{"use strict";t.exports=o},6763:t=>{"use strict";t.exports=r},9440:e=>{"use strict";e.exports=t},1662:t=>{"use strict";t.exports=e},2181:t=>{"use strict";t.exports=i},5876:t=>{"use strict";t.exports=n},9603:t=>{"use strict";t.exports=a},8109:t=>{"use strict";t.exports=c},2170:t=>{"use strict";t.exports=u},6615:(t,e,r)=>{t.exports=r(8402)},7169:(t,e,r)=>{t.exports=r(7867)},6319:(t,e,r)=>{t.exports=r(2616)},1426:(t,e,r)=>{t.exports=r(9617)},6226:(t,e,r)=>{t.exports=r(4525)},8628:(t,e,r)=>{t.exports=r(6343)},4007:(t,e,r)=>{t.exports=r(7852)},5413:(t,e,r)=>{t.exports=r(1618)},3363:(t,e,r)=>{t.exports=r(9528)},1721:(t,e,r)=>{t.exports=r(2990)},129:(t,e,r)=>{t.exports=r(1086)},165:(t,e,r)=>{t.exports=r(2268)},1265:(t,e,r)=>{r(4598)},5569:(t,e,r)=>{t.exports=r(6660)},9544:(t,e,r)=>{t.exports=r(975)},5110:(t,e,r)=>{t.exports=r(9703)},1549:(t,e,r)=>{t.exports=r(8251)},8928:(t,e,r)=>{t.exports=r(6513)},6751:(t,e,r)=>{t.exports=r(3220)},6100:(t,e,r)=>{t.exports=r(9563)},697:(t,e,r)=>{t.exports=r(6490)},1240:(t,e,r)=>{t.exports=r(5204)},7189:(t,e,r)=>{r(9270)},6255:(t,e,r)=>{t.exports=r(568)},6512:(t,e,r)=>{t.exports=r(8348)},6984:(t,e,r)=>{t.exports=r(9792)},533:(t,e,r)=>{var n=r(591),s=r(4704);t.exports=function(t,e,r){return(e=s(e))in t?n(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},t.exports.__esModule=!0,t.exports.default=t.exports},6973:(t,e,r)=>{var n=r(8130),s=r(1234).default;t.exports=function(t,e){if("object"!=s(t)||!t)return t;var r=t[n];if(void 0!==r){var o=r.call(t,e||"default");if("object"!=s(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)},t.exports.__esModule=!0,t.exports.default=t.exports},4704:(t,e,r)=>{var n=r(1234).default,s=r(6973);t.exports=function(t){var e=s(t,"string");return"symbol"==n(e)?e:e+""},t.exports.__esModule=!0,t.exports.default=t.exports},1234:(t,e,r)=>{var n=r(3071),s=r(4473);function o(e){return t.exports=o="function"==typeof n&&"symbol"==typeof s?function(t){return typeof t}:function(t){return t&&"function"==typeof n&&t.constructor===n&&t!==n.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,o(e)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},6040:(t,e,r)=>{"use strict";var n=r(8251);t.exports=n},7264:(t,e,r)=>{"use strict";var n=r(4139);r(768),r(8549),r(7152),r(1372),t.exports=n},9692:(t,e,r)=>{"use strict";var n=r(7045);t.exports=n},5663:(t,e,r)=>{"use strict";var n=r(70);t.exports=n},3531:(t,e,r)=>{"use strict";r(2425);var n=r(2046);t.exports=n.Array.isArray},6177:(t,e,r)=>{"use strict";r(9295);var n=r(1747);t.exports=n("Array","filter")},4668:(t,e,r)=>{"use strict";r(6290);var n=r(1747);t.exports=n("Array","find")},2092:(t,e,r)=>{"use strict";r(5650);var n=r(1747);t.exports=n("Array","forEach")},1362:(t,e,r)=>{"use strict";r(9748);var n=r(1747);t.exports=n("Array","includes")},3309:(t,e,r)=>{"use strict";r(6391);var n=r(1747);t.exports=n("Array","indexOf")},6535:(t,e,r)=>{"use strict";r(9363),r(3643);var n=r(1747);t.exports=n("Array","keys")},6693:(t,e,r)=>{"use strict";r(6339);var n=r(1747);t.exports=n("Array","reduce")},5939:(t,e,r)=>{"use strict";r(521);var n=r(1747);t.exports=n("Array","some")},1263:(t,e,r)=>{"use strict";r(6737);var n=r(1747);t.exports=n("Array","sort")},5354:(t,e,r)=>{"use strict";r(5362);var n=r(2046);t.exports=n.Date.now},3155:(t,e,r)=>{"use strict";var n=r(8280),s=r(6177),o=Array.prototype;t.exports=function(t){var e=t.filter;return t===o||n(o,t)&&e===o.filter?s:e}},3246:(t,e,r)=>{"use strict";var n=r(8280),s=r(4668),o=Array.prototype;t.exports=function(t){var e=t.find;return t===o||n(o,t)&&e===o.find?s:e}},6880:(t,e,r)=>{"use strict";var n=r(8280),s=r(1362),o=r(4378),i=Array.prototype,a=String.prototype;t.exports=function(t){var e=t.includes;return t===i||n(i,t)&&e===i.includes?s:"string"==typeof t||t===a||n(a,t)&&e===a.includes?o:e}},4507:(t,e,r)=>{"use strict";var n=r(8280),s=r(3309),o=Array.prototype;t.exports=function(t){var e=t.indexOf;return t===o||n(o,t)&&e===o.indexOf?s:e}},8823:(t,e,r)=>{"use strict";var n=r(8280),s=r(6693),o=Array.prototype;t.exports=function(t){var e=t.reduce;return t===o||n(o,t)&&e===o.reduce?s:e}},9685:(t,e,r)=>{"use strict";var n=r(8280),s=r(5939),o=Array.prototype;t.exports=function(t){var e=t.some;return t===o||n(o,t)&&e===o.some?s:e}},2757:(t,e,r)=>{"use strict";var n=r(8280),s=r(1263),o=Array.prototype;t.exports=function(t){var e=t.sort;return t===o||n(o,t)&&e===o.sort?s:e}},7961:(t,e,r)=>{"use strict";var n=r(8280),s=r(4491),o=String.prototype;t.exports=function(t){var e=t.startsWith;return"string"==typeof t||t===o||n(o,t)&&e===o.startsWith?s:e}},3423:(t,e,r)=>{"use strict";var n=r(8280),s=r(7511),o=String.prototype;t.exports=function(t){var e=t.trim;return"string"==typeof t||t===o||n(o,t)&&e===o.trim?s:e}},317:(t,e,r)=>{"use strict";r(6648),r(9721);var n=r(2046),s=r(6024);n.JSON||(n.JSON={stringify:JSON.stringify}),t.exports=function(t,e,r){return s(n.JSON.stringify,null,arguments)}},7367:(t,e,r)=>{"use strict";r(1340);var n=r(2046);t.exports=n.Object.assign},8970:(t,e,r)=>{"use strict";r(7810);var n=r(2046).Object,s=t.exports=function(t,e){return n.defineProperties(t,e)};n.defineProperties.sham&&(s.sham=!0)},1926:(t,e,r)=>{"use strict";r(6750);var n=r(2046).Object,s=t.exports=function(t,e,r){return n.defineProperty(t,e,r)};n.defineProperty.sham&&(s.sham=!0)},5092:(t,e,r)=>{"use strict";r(7052);var n=r(2046).Object,s=t.exports=function(t,e){return n.getOwnPropertyDescriptor(t,e)};n.getOwnPropertyDescriptor.sham&&(s.sham=!0)},9147:(t,e,r)=>{"use strict";r(179);var n=r(2046);t.exports=n.Object.getOwnPropertyDescriptors},4776:(t,e,r)=>{"use strict";r(4452);var n=r(2046);t.exports=n.Object.getOwnPropertySymbols},9661:(t,e,r)=>{"use strict";r(3589);var n=r(2046);t.exports=n.Object.keys},7027:(t,e,r)=>{"use strict";r(4502),r(9363),r(3643),r(5931),r(7450),r(6415),r(7380),r(5823),r(7714),r(7057);var n=r(2046);t.exports=n.Promise},4378:(t,e,r)=>{"use strict";r(9770);var n=r(1747);t.exports=n("String","includes")},4491:(t,e,r)=>{"use strict";r(2395);var n=r(1747);t.exports=n("String","startsWith")},7511:(t,e,r)=>{"use strict";r(727);var n=r(1747);t.exports=n("String","trim")},3842:(t,e,r)=>{"use strict";r(8545),r(3643),r(4452),r(5546),r(3997),r(5084),r(2499),r(2596),r(5721),r(4954),r(4123),r(3377),r(2230),r(5344),r(1660),r(4610),r(3669),r(4810),r(3325),r(7024),r(8172),r(5205);var n=r(2046);t.exports=n.Symbol},1730:(t,e,r)=>{"use strict";r(9363),r(3643),r(7057),r(4954);var n=r(560);t.exports=n.f("iterator")},1661:(t,e,r)=>{"use strict";r(8537),r(3669);var n=r(560);t.exports=n.f("toPrimitive")},591:(t,e,r)=>{"use strict";t.exports=r(4997)},3071:(t,e,r)=>{"use strict";t.exports=r(2321)},4473:(t,e,r)=>{"use strict";t.exports=r(2231)},8130:(t,e,r)=>{"use strict";t.exports=r(9280)},4997:(t,e,r)=>{"use strict";var n=r(6040);t.exports=n},2321:(t,e,r)=>{"use strict";var n=r(7264);r(3939),r(1785),r(1697),r(4664),r(3422),r(36),r(8703),r(6878),r(9671),r(359),t.exports=n},2231:(t,e,r)=>{"use strict";var n=r(9692);t.exports=n},9280:(t,e,r)=>{"use strict";var n=r(5663);t.exports=n},2159:(t,e,r)=>{"use strict";var n=r(2250),s=r(4640),o=TypeError;t.exports=function(t){if(n(t))return t;throw new o(s(t)+" is not a function")}},2235:(t,e,r)=>{"use strict";var n=r(5468),s=r(4640),o=TypeError;t.exports=function(t){if(n(t))return t;throw new o(s(t)+" is not a constructor")}},43:(t,e,r)=>{"use strict";var n=r(4018),s=String,o=TypeError;t.exports=function(t){if(n(t))return t;throw new o("Can't set "+s(t)+" as a prototype")}},2156:t=>{"use strict";t.exports=function(){}},9596:(t,e,r)=>{"use strict";var n=r(8280),s=TypeError;t.exports=function(t,e){if(n(e,t))return t;throw new s("Incorrect invocation")}},6624:(t,e,r)=>{"use strict";var n=r(6285),s=String,o=TypeError;t.exports=function(t){if(n(t))return t;throw new o(s(t)+" is not an object")}},2914:(t,e,r)=>{"use strict";var n=r(726).forEach,s=r(7623)("forEach");t.exports=s?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},1229:(t,e,r)=>{"use strict";var n=r(8311),s=r(3930),o=r(9298),i=r(6818),a=r(7812),c=r(5468),u=r(575),l=r(5543),h=r(300),p=r(3448),d=Array;t.exports=function(t){var e=o(t),r=c(this),f=arguments.length,g=f>1?arguments[1]:void 0,v=void 0!==g;v&&(g=n(g,f>2?arguments[2]:void 0));var m,w,y,x,_,b,S=p(e),k=0;if(!S||this===d&&a(S))for(m=u(e),w=r?new this(m):d(m);m>k;k++)b=v?g(e[k],k):e[k],l(w,k,b);else for(w=r?new this:[],_=(x=h(e,S)).next;!(y=s(_,x)).done;k++)b=v?i(x,g,[y.value,k],!0):y.value,l(w,k,b);return w.length=k,w}},4436:(t,e,r)=>{"use strict";var n=r(7374),s=r(4849),o=r(575),i=function(t){return function(e,r,i){var a=n(e),c=o(a);if(0===c)return!t&&-1;var u,l=s(i,c);if(t&&r!=r){for(;c>l;)if((u=a[l++])!=u)return!0}else for(;c>l;l++)if((t||l in a)&&a[l]===r)return t||l||0;return!t&&-1}};t.exports={includes:i(!0),indexOf:i(!1)}},726:(t,e,r)=>{"use strict";var n=r(8311),s=r(1907),o=r(6946),i=r(9298),a=r(575),c=r(6968),u=s([].push),l=function(t){var e=1===t,r=2===t,s=3===t,l=4===t,h=6===t,p=7===t,d=5===t||h;return function(f,g,v,m){for(var w,y,x=i(f),_=o(x),b=a(_),S=n(g,v),k=0,T=m||c,A=e?T(f,b):r||p?T(f,0):void 0;b>k;k++)if((d||k in _)&&(y=S(w=_[k],k,x),t))if(e)A[k]=y;else if(y)switch(t){case 3:return!0;case 5:return w;case 6:return k;case 2:u(A,w)}else switch(t){case 4:return!1;case 7:u(A,w)}return h?-1:s||l?l:A}};t.exports={forEach:l(0),map:l(1),filter:l(2),some:l(3),every:l(4),find:l(5),findIndex:l(6),filterReject:l(7)}},7171:(t,e,r)=>{"use strict";var n=r(8828),s=r(6264),o=r(798),i=s("species");t.exports=function(t){return o>=51||!n(function(){var e=[];return(e.constructor={})[i]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},7623:(t,e,r)=>{"use strict";var n=r(8828);t.exports=function(t,e){var r=[][t];return!!r&&n(function(){r.call(null,e||function(){return 1},1)})}},5043:(t,e,r)=>{"use strict";var n=r(2159),s=r(9298),o=r(6946),i=r(575),a=TypeError,c="Reduce of empty array with no initial value",u=function(t){return function(e,r,u,l){var h=s(e),p=o(h),d=i(h);if(n(r),0===d&&u<2)throw new a(c);var f=t?d-1:0,g=t?-1:1;if(u<2)for(;;){if(f in p){l=p[f],f+=g;break}if(f+=g,t?f<0:d<=f)throw new a(c)}for(;t?f>=0:d>f;f+=g)f in p&&(l=r(l,p[f],f,h));return l}};t.exports={left:u(!1),right:u(!0)}},3427:(t,e,r)=>{"use strict";var n=r(1907);t.exports=n([].slice)},4321:(t,e,r)=>{"use strict";var n=r(3427),s=Math.floor,o=function(t,e){var r=t.length;if(r<8)for(var i,a,c=1;c<r;){for(a=c,i=t[c];a&&e(t[a-1],i)>0;)t[a]=t[--a];a!==c++&&(t[a]=i)}else for(var u=s(r/2),l=o(n(t,0,u),e),h=o(n(t,u),e),p=l.length,d=h.length,f=0,g=0;f<p||g<d;)t[f+g]=f<p&&g<d?e(l[f],h[g])<=0?l[f++]:h[g++]:f<p?l[f++]:h[g++];return t};t.exports=o},4010:(t,e,r)=>{"use strict";var n=r(1793),s=r(5468),o=r(6285),i=r(6264)("species"),a=Array;t.exports=function(t){var e;return n(t)&&(e=t.constructor,(s(e)&&(e===a||n(e.prototype))||o(e)&&null===(e=e[i]))&&(e=void 0)),void 0===e?a:e}},6968:(t,e,r)=>{"use strict";var n=r(4010);t.exports=function(t,e){return new(n(t))(0===e?0:e)}},6818:(t,e,r)=>{"use strict";var n=r(6624),s=r(154);t.exports=function(t,e,r,o){try{return o?e(n(r)[0],r[1]):e(r)}catch(e){s(t,"throw",e)}}},473:(t,e,r)=>{"use strict";var n=r(6264)("iterator"),s=!1;try{var o=0,i={next:function(){return{done:!!o++}},return:function(){s=!0}};i[n]=function(){return this},Array.from(i,function(){throw 2})}catch(t){}t.exports=function(t,e){try{if(!e&&!s)return!1}catch(t){return!1}var r=!1;try{var o={};o[n]=function(){return{next:function(){return{done:r=!0}}}},t(o)}catch(t){}return r}},5807:(t,e,r)=>{"use strict";var n=r(1907),s=n({}.toString),o=n("".slice);t.exports=function(t){return o(s(t),8,-1)}},3948:(t,e,r)=>{"use strict";var n=r(2623),s=r(2250),o=r(5807),i=r(6264)("toStringTag"),a=Object,c="Arguments"===o(function(){return arguments}());t.exports=n?o:function(t){var e,r,n;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=function(t,e){try{return t[e]}catch(t){}}(e=a(t),i))?r:c?o(e):"Object"===(n=o(e))&&s(e.callee)?"Arguments":n}},9595:(t,e,r)=>{"use strict";var n=r(9724),s=r(1042),o=r(3846),i=r(4284);t.exports=function(t,e,r){for(var a=s(e),c=i.f,u=o.f,l=0;l<a.length;l++){var h=a[l];n(t,h)||r&&n(r,h)||c(t,h,u(e,h))}}},5735:(t,e,r)=>{"use strict";var n=r(6264)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[n]=!1,"/./"[t](e)}catch(t){}}return!1}},7382:(t,e,r)=>{"use strict";var n=r(8828);t.exports=!n(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})},9550:t=>{"use strict";t.exports=function(t,e){return{value:t,done:e}}},1626:(t,e,r)=>{"use strict";var n=r(9447),s=r(4284),o=r(5817);t.exports=n?function(t,e,r){return s.f(t,e,o(1,r))}:function(t,e,r){return t[e]=r,t}},5817:t=>{"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},5543:(t,e,r)=>{"use strict";var n=r(9447),s=r(4284),o=r(5817);t.exports=function(t,e,r){n?s.f(t,e,o(0,r)):t[e]=r}},3701:(t,e,r)=>{"use strict";var n=r(1907),s=r(8828),o=r(1164).start,i=RangeError,a=isFinite,c=Math.abs,u=Date.prototype,l=u.toISOString,h=n(u.getTime),p=n(u.getUTCDate),d=n(u.getUTCFullYear),f=n(u.getUTCHours),g=n(u.getUTCMilliseconds),v=n(u.getUTCMinutes),m=n(u.getUTCMonth),w=n(u.getUTCSeconds);t.exports=s(function(){return"0385-07-25T07:06:39.999Z"!==l.call(new Date(-50000000000001))})||!s(function(){l.call(new Date(NaN))})?function(){if(!a(h(this)))throw new i("Invalid time value");var t=this,e=d(t),r=g(t),n=e<0?"-":e>9999?"+":"";return n+o(c(e),n?6:4,0)+"-"+o(m(t)+1,2,0)+"-"+o(p(t),2,0)+"T"+o(f(t),2,0)+":"+o(v(t),2,0)+":"+o(w(t),2,0)+"."+o(r,3,0)+"Z"}:l},9251:(t,e,r)=>{"use strict";var n=r(4284);t.exports=function(t,e,r){return n.f(t,e,r)}},8055:(t,e,r)=>{"use strict";var n=r(1626);t.exports=function(t,e,r,s){return s&&s.enumerable?t[e]=r:n(t,e,r),t}},2802:(t,e,r)=>{"use strict";var n=r(8055);t.exports=function(t,e,r){for(var s in e)r&&r.unsafe&&t[s]?t[s]=e[s]:n(t,s,e[s],r);return t}},2532:(t,e,r)=>{"use strict";var n=r(5951),s=Object.defineProperty;t.exports=function(t,e){try{s(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},4535:(t,e,r)=>{"use strict";var n=r(4640),s=TypeError;t.exports=function(t,e){if(!delete t[e])throw new s("Cannot delete property "+n(e)+" of "+n(t))}},9447:(t,e,r)=>{"use strict";var n=r(8828);t.exports=!n(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},9552:(t,e,r)=>{"use strict";var n=r(5951),s=r(6285),o=n.document,i=s(o)&&s(o.createElement);t.exports=function(t){return i?o.createElement(t):{}}},8024:t=>{"use strict";var e=TypeError;t.exports=function(t){if(t>9007199254740991)throw e("Maximum allowed index exceeded");return t}},9287:t=>{"use strict";t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},376:t=>{"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},3440:(t,e,r)=>{"use strict";var n=r(6794).match(/firefox\/(\d+)/i);t.exports=!!n&&+n[1]},4328:(t,e,r)=>{"use strict";var n=r(6794);t.exports=/MSIE|Trident/.test(n)},8606:(t,e,r)=>{"use strict";var n=r(6794);t.exports=/ipad|iphone|ipod/i.test(n)&&"undefined"!=typeof Pebble},1829:(t,e,r)=>{"use strict";var n=r(6794);t.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(n)},7586:(t,e,r)=>{"use strict";var n=r(2832);t.exports="NODE"===n},9291:(t,e,r)=>{"use strict";var n=r(6794);t.exports=/web0s(?!.*chrome)/i.test(n)},6794:(t,e,r)=>{"use strict";var n=r(5951).navigator,s=n&&n.userAgent;t.exports=s?String(s):""},798:(t,e,r)=>{"use strict";var n,s,o=r(5951),i=r(6794),a=o.process,c=o.Deno,u=a&&a.versions||c&&c.version,l=u&&u.v8;l&&(s=(n=l.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!s&&i&&(!(n=i.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=i.match(/Chrome\/(\d+)/))&&(s=+n[1]),t.exports=s},3786:(t,e,r)=>{"use strict";var n=r(6794).match(/AppleWebKit\/(\d+)\./);t.exports=!!n&&+n[1]},2832:(t,e,r)=>{"use strict";var n=r(5951),s=r(6794),o=r(5807),i=function(t){return s.slice(0,t.length)===t};t.exports=i("Bun/")?"BUN":i("Cloudflare-Workers")?"CLOUDFLARE":i("Deno/")?"DENO":i("Node.js/")?"NODE":n.Bun&&"string"==typeof Bun.version?"BUN":n.Deno&&"object"==typeof Deno.version?"DENO":"process"===o(n.process)?"NODE":n.window&&n.document?"BROWSER":"REST"},5762:(t,e,r)=>{"use strict";var n=r(1907),s=Error,o=n("".replace),i=String(new s("zxcasd").stack),a=/\n\s*at [^:]*:[^\n]*/,c=a.test(i);t.exports=function(t,e){if(c&&"string"==typeof t&&!s.prepareStackTrace)for(;e--;)t=o(t,a,"");return t}},5884:(t,e,r)=>{"use strict";var n=r(1626),s=r(5762),o=r(3888),i=Error.captureStackTrace;t.exports=function(t,e,r,a){o&&(i?i(t,e):n(t,"stack",s(r,a)))}},3888:(t,e,r)=>{"use strict";var n=r(8828),s=r(5817);t.exports=!n(function(){var t=new Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",s(1,7)),7!==t.stack)})},1091:(t,e,r)=>{"use strict";var n=r(5951),s=r(6024),o=r(2361),i=r(2250),a=r(3846).f,c=r(7463),u=r(2046),l=r(8311),h=r(1626),p=r(9724);r(6128);var d=function(t){var e=function(r,n,o){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(r);case 2:return new t(r,n)}return new t(r,n,o)}return s(t,this,arguments)};return e.prototype=t.prototype,e};t.exports=function(t,e){var r,s,f,g,v,m,w,y,x,_=t.target,b=t.global,S=t.stat,k=t.proto,T=b?n:S?n[_]:n[_]&&n[_].prototype,A=b?u:u[_]||h(u,_,{})[_],C=A.prototype;for(g in e)s=!(r=c(b?g:_+(S?".":"#")+g,t.forced))&&T&&p(T,g),m=A[g],s&&(w=t.dontCallGetSet?(x=a(T,g))&&x.value:T[g]),v=s&&w?w:e[g],(r||k||typeof m!=typeof v)&&(y=t.bind&&s?l(v,n):t.wrap&&s?d(v):k&&i(v)?o(v):v,(t.sham||v&&v.sham||m&&m.sham)&&h(y,"sham",!0),h(A,g,y),k&&(p(u,f=_+"Prototype")||h(u,f,{}),h(u[f],g,v),t.real&&C&&(r||!C[g])&&h(C,g,v)))}},8828:t=>{"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},6024:(t,e,r)=>{"use strict";var n=r(1505),s=Function.prototype,o=s.apply,i=s.call;t.exports="object"==typeof Reflect&&Reflect.apply||(n?i.bind(o):function(){return i.apply(o,arguments)})},8311:(t,e,r)=>{"use strict";var n=r(2361),s=r(2159),o=r(1505),i=n(n.bind);t.exports=function(t,e){return s(t),void 0===e?t:o?i(t,e):function(){return t.apply(e,arguments)}}},1505:(t,e,r)=>{"use strict";var n=r(8828);t.exports=!n(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},3930:(t,e,r)=>{"use strict";var n=r(1505),s=Function.prototype.call;t.exports=n?s.bind(s):function(){return s.apply(s,arguments)}},6833:(t,e,r)=>{"use strict";var n=r(9447),s=r(9724),o=Function.prototype,i=n&&Object.getOwnPropertyDescriptor,a=s(o,"name"),c=a&&"something"===function(){}.name,u=a&&(!n||n&&i(o,"name").configurable);t.exports={EXISTS:a,PROPER:c,CONFIGURABLE:u}},1871:(t,e,r)=>{"use strict";var n=r(1907),s=r(2159);t.exports=function(t,e,r){try{return n(s(Object.getOwnPropertyDescriptor(t,e)[r]))}catch(t){}}},2361:(t,e,r)=>{"use strict";var n=r(5807),s=r(1907);t.exports=function(t){if("Function"===n(t))return s(t)}},1907:(t,e,r)=>{"use strict";var n=r(1505),s=Function.prototype,o=s.call,i=n&&s.bind.bind(o,o);t.exports=n?i:function(t){return function(){return o.apply(t,arguments)}}},1747:(t,e,r)=>{"use strict";var n=r(5951),s=r(2046);t.exports=function(t,e){var r=s[t+"Prototype"],o=r&&r[e];if(o)return o;var i=n[t],a=i&&i.prototype;return a&&a[e]}},5582:(t,e,r)=>{"use strict";var n=r(2046),s=r(5951),o=r(2250),i=function(t){return o(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?i(n[t])||i(s[t]):n[t]&&n[t][e]||s[t]&&s[t][e]}},3448:(t,e,r)=>{"use strict";var n=r(3948),s=r(9367),o=r(7136),i=r(3742),a=r(6264)("iterator");t.exports=function(t){if(!o(t))return s(t,a)||s(t,"@@iterator")||i[n(t)]}},300:(t,e,r)=>{"use strict";var n=r(3930),s=r(2159),o=r(6624),i=r(4640),a=r(3448),c=TypeError;t.exports=function(t,e){var r=arguments.length<2?a(t):e;if(s(r))return o(n(r,t));throw new c(i(t)+" is not iterable")}},6656:(t,e,r)=>{"use strict";var n=r(1907),s=r(1793),o=r(2250),i=r(5807),a=r(160),c=n([].push);t.exports=function(t){if(o(t))return t;if(s(t)){for(var e=t.length,r=[],n=0;n<e;n++){var u=t[n];"string"==typeof u?c(r,u):"number"!=typeof u&&"Number"!==i(u)&&"String"!==i(u)||c(r,a(u))}var l=r.length,h=!0;return function(t,e){if(h)return h=!1,e;if(s(this))return e;for(var n=0;n<l;n++)if(r[n]===t)return e}}}},9367:(t,e,r)=>{"use strict";var n=r(2159),s=r(7136);t.exports=function(t,e){var r=t[e];return s(r)?void 0:n(r)}},5951:function(t){"use strict";var e=function(t){return t&&t.Math===Math&&t};t.exports=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof global&&global)||e("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9724:(t,e,r)=>{"use strict";var n=r(1907),s=r(9298),o=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return o(s(t),e)}},8530:t=>{"use strict";t.exports={}},3904:t=>{"use strict";t.exports=function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(t){}}},2416:(t,e,r)=>{"use strict";var n=r(5582);t.exports=n("document","documentElement")},3648:(t,e,r)=>{"use strict";var n=r(9447),s=r(8828),o=r(9552);t.exports=!n&&!s(function(){return 7!==Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a})},6946:(t,e,r)=>{"use strict";var n=r(1907),s=r(8828),o=r(5807),i=Object,a=n("".split);t.exports=s(function(){return!i("z").propertyIsEnumerable(0)})?function(t){return"String"===o(t)?a(t,""):i(t)}:i},2647:(t,e,r)=>{"use strict";var n=r(1907),s=r(2250),o=r(6128),i=n(Function.toString);s(o.inspectSource)||(o.inspectSource=function(t){return i(t)}),t.exports=o.inspectSource},9259:(t,e,r)=>{"use strict";var n=r(6285),s=r(1626);t.exports=function(t,e){n(e)&&"cause"in e&&s(t,"cause",e.cause)}},4932:(t,e,r)=>{"use strict";var n,s,o,i=r(551),a=r(5951),c=r(6285),u=r(1626),l=r(9724),h=r(6128),p=r(2522),d=r(8530),f="Object already initialized",g=a.TypeError,v=a.WeakMap;if(i||h.state){var m=h.state||(h.state=new v);m.get=m.get,m.has=m.has,m.set=m.set,n=function(t,e){if(m.has(t))throw new g(f);return e.facade=t,m.set(t,e),e},s=function(t){return m.get(t)||{}},o=function(t){return m.has(t)}}else{var w=p("state");d[w]=!0,n=function(t,e){if(l(t,w))throw new g(f);return e.facade=t,u(t,w,e),e},s=function(t){return l(t,w)?t[w]:{}},o=function(t){return l(t,w)}}t.exports={set:n,get:s,has:o,enforce:function(t){return o(t)?s(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!c(e)||(r=s(e)).type!==t)throw new g("Incompatible receiver, "+t+" required");return r}}}},7812:(t,e,r)=>{"use strict";var n=r(6264),s=r(3742),o=n("iterator"),i=Array.prototype;t.exports=function(t){return void 0!==t&&(s.Array===t||i[o]===t)}},1793:(t,e,r)=>{"use strict";var n=r(5807);t.exports=Array.isArray||function(t){return"Array"===n(t)}},2250:t=>{"use strict";var e="object"==typeof document&&document.all;t.exports=void 0===e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},5468:(t,e,r)=>{"use strict";var n=r(1907),s=r(8828),o=r(2250),i=r(3948),a=r(5582),c=r(2647),u=function(){},l=a("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=n(h.exec),d=!h.test(u),f=function(t){if(!o(t))return!1;try{return l(u,[],t),!0}catch(t){return!1}},g=function(t){if(!o(t))return!1;switch(i(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return d||!!p(h,c(t))}catch(t){return!0}};g.sham=!0,t.exports=!l||s(function(){var t;return f(f.call)||!f(Object)||!f(function(){t=!0})||t})?g:f},7463:(t,e,r)=>{"use strict";var n=r(8828),s=r(2250),o=/#|\.prototype\./,i=function(t,e){var r=c[a(t)];return r===l||r!==u&&(s(e)?n(e):!!e)},a=i.normalize=function(t){return String(t).replace(o,".").toLowerCase()},c=i.data={},u=i.NATIVE="N",l=i.POLYFILL="P";t.exports=i},7136:t=>{"use strict";t.exports=function(t){return null==t}},6285:(t,e,r)=>{"use strict";var n=r(2250);t.exports=function(t){return"object"==typeof t?null!==t:n(t)}},4018:(t,e,r)=>{"use strict";var n=r(6285);t.exports=function(t){return n(t)||null===t}},7376:t=>{"use strict";t.exports=!0},2087:(t,e,r)=>{"use strict";var n=r(6285),s=r(5807),o=r(6264)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[o])?!!e:"RegExp"===s(t))}},5594:(t,e,r)=>{"use strict";var n=r(5582),s=r(2250),o=r(8280),i=r(1175),a=Object;t.exports=i?function(t){return"symbol"==typeof t}:function(t){var e=n("Symbol");return s(e)&&o(e.prototype,a(t))}},4823:(t,e,r)=>{"use strict";var n=r(8311),s=r(3930),o=r(6624),i=r(4640),a=r(7812),c=r(575),u=r(8280),l=r(300),h=r(3448),p=r(154),d=TypeError,f=function(t,e){this.stopped=t,this.result=e},g=f.prototype;t.exports=function(t,e,r){var v,m,w,y,x,_,b,S=r&&r.that,k=!(!r||!r.AS_ENTRIES),T=!(!r||!r.IS_RECORD),A=!(!r||!r.IS_ITERATOR),C=!(!r||!r.INTERRUPTED),P=n(e,S),O=function(t){return v&&p(v,"normal"),new f(!0,t)},j=function(t){return k?(o(t),C?P(t[0],t[1],O):P(t[0],t[1])):C?P(t,O):P(t)};if(T)v=t.iterator;else if(A)v=t;else{if(!(m=h(t)))throw new d(i(t)+" is not iterable");if(a(m)){for(w=0,y=c(t);y>w;w++)if((x=j(t[w]))&&u(g,x))return x;return new f(!1)}v=l(t,m)}for(_=T?t.next:v.next;!(b=s(_,v)).done;){try{x=j(b.value)}catch(t){p(v,"throw",t)}if("object"==typeof x&&x&&u(g,x))return x}return new f(!1)}},154:(t,e,r)=>{"use strict";var n=r(3930),s=r(6624),o=r(9367);t.exports=function(t,e,r){var i,a;s(t);try{if(!(i=o(t,"return"))){if("throw"===e)throw r;return r}i=n(i,t)}catch(t){a=!0,i=t}if("throw"===e)throw r;if(a)throw i;return s(i),r}},7181:(t,e,r)=>{"use strict";var n=r(5116).IteratorPrototype,s=r(8075),o=r(5817),i=r(4840),a=r(3742),c=function(){return this};t.exports=function(t,e,r,u){var l=e+" Iterator";return t.prototype=s(n,{next:o(+!u,r)}),i(t,l,!1,!0),a[l]=c,t}},183:(t,e,r)=>{"use strict";var n=r(1091),s=r(3930),o=r(7376),i=r(6833),a=r(2250),c=r(7181),u=r(5972),l=r(9192),h=r(4840),p=r(1626),d=r(8055),f=r(6264),g=r(3742),v=r(5116),m=i.PROPER,w=i.CONFIGURABLE,y=v.IteratorPrototype,x=v.BUGGY_SAFARI_ITERATORS,_=f("iterator"),b="keys",S="values",k="entries",T=function(){return this};t.exports=function(t,e,r,i,f,v,A){c(r,e,i);var C,P,O,j=function(t){if(t===f&&I)return I;if(!x&&t&&t in L)return L[t];switch(t){case b:case S:case k:return function(){return new r(this,t)}}return function(){return new r(this)}},R=e+" Iterator",U=!1,L=t.prototype,E=L[_]||L["@@iterator"]||f&&L[f],I=!x&&E||j(f),D="Array"===e&&L.entries||E;if(D&&(C=u(D.call(new t)))!==Object.prototype&&C.next&&(o||u(C)===y||(l?l(C,y):a(C[_])||d(C,_,T)),h(C,R,!0,!0),o&&(g[R]=T)),m&&f===S&&E&&E.name!==S&&(!o&&w?p(L,"name",S):(U=!0,I=function(){return s(E,this)})),f)if(P={values:j(S),keys:v?I:j(b),entries:j(k)},A)for(O in P)(x||U||!(O in L))&&d(L,O,P[O]);else n({target:e,proto:!0,forced:x||U},P);return o&&!A||L[_]===I||d(L,_,I,{name:f}),g[e]=I,P}},5116:(t,e,r)=>{"use strict";var n,s,o,i=r(8828),a=r(2250),c=r(6285),u=r(8075),l=r(5972),h=r(8055),p=r(6264),d=r(7376),f=p("iterator"),g=!1;[].keys&&("next"in(o=[].keys())?(s=l(l(o)))!==Object.prototype&&(n=s):g=!0),!c(n)||i(function(){var t={};return n[f].call(t)!==t})?n={}:d&&(n=u(n)),a(n[f])||h(n,f,function(){return this}),t.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:g}},3742:t=>{"use strict";t.exports={}},575:(t,e,r)=>{"use strict";var n=r(3121);t.exports=function(t){return n(t.length)}},1176:t=>{"use strict";var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},2292:(t,e,r)=>{"use strict";var n,s,o,i,a,c=r(5951),u=r(2098),l=r(8311),h=r(9472).set,p=r(9245),d=r(1829),f=r(8606),g=r(9291),v=r(7586),m=c.MutationObserver||c.WebKitMutationObserver,w=c.document,y=c.process,x=c.Promise,_=u("queueMicrotask");if(!_){var b=new p,S=function(){var t,e;for(v&&(t=y.domain)&&t.exit();e=b.get();)try{e()}catch(t){throw b.head&&n(),t}t&&t.enter()};d||v||g||!m||!w?!f&&x&&x.resolve?((i=x.resolve(void 0)).constructor=x,a=l(i.then,i),n=function(){a(S)}):v?n=function(){y.nextTick(S)}:(h=l(h,c),n=function(){h(S)}):(s=!0,o=w.createTextNode(""),new m(S).observe(o,{characterData:!0}),n=function(){o.data=s=!s}),_=function(t){b.head||n(),b.add(t)}}t.exports=_},6254:(t,e,r)=>{"use strict";var n=r(2159),s=TypeError,o=function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw new s("Bad Promise constructor");e=t,r=n}),this.resolve=n(e),this.reject=n(r)};t.exports.f=function(t){return new o(t)}},2096:(t,e,r)=>{"use strict";var n=r(160);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:n(t)}},2074:(t,e,r)=>{"use strict";var n=r(2087),s=TypeError;t.exports=function(t){if(n(t))throw new s("The method doesn't accept regular expressions");return t}},9538:(t,e,r)=>{"use strict";var n=r(9447),s=r(1907),o=r(3930),i=r(8828),a=r(2875),c=r(7170),u=r(2574),l=r(9298),h=r(6946),p=Object.assign,d=Object.defineProperty,f=s([].concat);t.exports=!p||i(function(){if(n&&1!==p({b:1},p(d({},"a",{enumerable:!0,get:function(){d(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol("assign detection"),s="abcdefghijklmnopqrst";return t[r]=7,s.split("").forEach(function(t){e[t]=t}),7!==p({},t)[r]||a(p({},e)).join("")!==s})?function(t,e){for(var r=l(t),s=arguments.length,i=1,p=c.f,d=u.f;s>i;)for(var g,v=h(arguments[i++]),m=p?f(a(v),p(v)):a(v),w=m.length,y=0;w>y;)g=m[y++],n&&!o(d,v,g)||(r[g]=v[g]);return r}:p},8075:(t,e,r)=>{"use strict";var n,s=r(6624),o=r(2220),i=r(376),a=r(8530),c=r(2416),u=r(9552),l=r(2522),h="prototype",p="script",d=l("IE_PROTO"),f=function(){},g=function(t){return"<"+p+">"+t+"</"+p+">"},v=function(t){t.write(g("")),t.close();var e=t.parentWindow.Object;return t=null,e},m=function(){try{n=new ActiveXObject("htmlfile")}catch(t){}var t,e,r;m="undefined"!=typeof document?document.domain&&n?v(n):(e=u("iframe"),r="java"+p+":",e.style.display="none",c.appendChild(e),e.src=String(r),(t=e.contentWindow.document).open(),t.write(g("document.F=Object")),t.close(),t.F):v(n);for(var s=i.length;s--;)delete m[h][i[s]];return m()};a[d]=!0,t.exports=Object.create||function(t,e){var r;return null!==t?(f[h]=s(t),r=new f,f[h]=null,r[d]=t):r=m(),void 0===e?r:o.f(r,e)}},2220:(t,e,r)=>{"use strict";var n=r(9447),s=r(8661),o=r(4284),i=r(6624),a=r(7374),c=r(2875);e.f=n&&!s?Object.defineProperties:function(t,e){i(t);for(var r,n=a(e),s=c(e),u=s.length,l=0;u>l;)o.f(t,r=s[l++],n[r]);return t}},4284:(t,e,r)=>{"use strict";var n=r(9447),s=r(3648),o=r(8661),i=r(6624),a=r(470),c=TypeError,u=Object.defineProperty,l=Object.getOwnPropertyDescriptor,h="enumerable",p="configurable",d="writable";e.f=n?o?function(t,e,r){if(i(t),e=a(e),i(r),"function"==typeof t&&"prototype"===e&&"value"in r&&d in r&&!r[d]){var n=l(t,e);n&&n[d]&&(t[e]=r.value,r={configurable:p in r?r[p]:n[p],enumerable:h in r?r[h]:n[h],writable:!1})}return u(t,e,r)}:u:function(t,e,r){if(i(t),e=a(e),i(r),s)try{return u(t,e,r)}catch(t){}if("get"in r||"set"in r)throw new c("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},3846:(t,e,r)=>{"use strict";var n=r(9447),s=r(3930),o=r(2574),i=r(5817),a=r(7374),c=r(470),u=r(9724),l=r(3648),h=Object.getOwnPropertyDescriptor;e.f=n?h:function(t,e){if(t=a(t),e=c(e),l)try{return h(t,e)}catch(t){}if(u(t,e))return i(!s(o.f,t,e),t[e])}},5407:(t,e,r)=>{"use strict";var n=r(5807),s=r(7374),o=r(4443).f,i=r(3427),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"Window"===n(t)?function(t){try{return o(t)}catch(t){return i(a)}}(t):o(s(t))}},4443:(t,e,r)=>{"use strict";var n=r(3045),s=r(376).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,s)}},7170:(t,e)=>{"use strict";e.f=Object.getOwnPropertySymbols},5972:(t,e,r)=>{"use strict";var n=r(9724),s=r(2250),o=r(9298),i=r(2522),a=r(7382),c=i("IE_PROTO"),u=Object,l=u.prototype;t.exports=a?u.getPrototypeOf:function(t){var e=o(t);if(n(e,c))return e[c];var r=e.constructor;return s(r)&&e instanceof r?r.prototype:e instanceof u?l:null}},8280:(t,e,r)=>{"use strict";var n=r(1907);t.exports=n({}.isPrototypeOf)},3045:(t,e,r)=>{"use strict";var n=r(1907),s=r(9724),o=r(7374),i=r(4436).indexOf,a=r(8530),c=n([].push);t.exports=function(t,e){var r,n=o(t),u=0,l=[];for(r in n)!s(a,r)&&s(n,r)&&c(l,r);for(;e.length>u;)s(n,r=e[u++])&&(~i(l,r)||c(l,r));return l}},2875:(t,e,r)=>{"use strict";var n=r(3045),s=r(376);t.exports=Object.keys||function(t){return n(t,s)}},2574:(t,e)=>{"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,s=n&&!r.call({1:2},1);e.f=s?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},9192:(t,e,r)=>{"use strict";var n=r(1871),s=r(6285),o=r(4239),i=r(43);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,r={};try{(t=n(Object.prototype,"__proto__","set"))(r,[]),e=r instanceof Array}catch(t){}return function(r,n){return o(r),i(n),s(r)?(e?t(r,n):r.__proto__=n,r):r}}():void 0)},4878:(t,e,r)=>{"use strict";var n=r(2623),s=r(3948);t.exports=n?{}.toString:function(){return"[object "+s(this)+"]"}},581:(t,e,r)=>{"use strict";var n=r(3930),s=r(2250),o=r(6285),i=TypeError;t.exports=function(t,e){var r,a;if("string"===e&&s(r=t.toString)&&!o(a=n(r,t)))return a;if(s(r=t.valueOf)&&!o(a=n(r,t)))return a;if("string"!==e&&s(r=t.toString)&&!o(a=n(r,t)))return a;throw new i("Can't convert object to primitive value")}},1042:(t,e,r)=>{"use strict";var n=r(5582),s=r(1907),o=r(4443),i=r(7170),a=r(6624),c=s([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=o.f(a(t)),r=i.f;return r?c(e,r(t)):e}},2046:t=>{"use strict";t.exports={}},4420:t=>{"use strict";t.exports=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}},1759:(t,e,r)=>{"use strict";var n=r(5951),s=r(5463),o=r(2250),i=r(7463),a=r(2647),c=r(6264),u=r(2832),l=r(7376),h=r(798),p=s&&s.prototype,d=c("species"),f=!1,g=o(n.PromiseRejectionEvent),v=i("Promise",function(){var t=a(s),e=t!==String(s);if(!e&&66===h)return!0;if(l&&(!p.catch||!p.finally))return!0;if(!h||h<51||!/native code/.test(t)){var r=new s(function(t){t(1)}),n=function(t){t(function(){},function(){})};if((r.constructor={})[d]=n,!(f=r.then(function(){})instanceof n))return!0}return!(e||"BROWSER"!==u&&"DENO"!==u||g)});t.exports={CONSTRUCTOR:v,REJECTION_EVENT:g,SUBCLASSING:f}},5463:(t,e,r)=>{"use strict";var n=r(5951);t.exports=n.Promise},3569:(t,e,r)=>{"use strict";var n=r(6624),s=r(6285),o=r(6254);t.exports=function(t,e){if(n(t),s(e)&&e.constructor===t)return e;var r=o.f(t);return(0,r.resolve)(e),r.promise}},3282:(t,e,r)=>{"use strict";var n=r(5463),s=r(473),o=r(1759).CONSTRUCTOR;t.exports=o||!s(function(t){n.all(t).then(void 0,function(){})})},9245:t=>{"use strict";var e=function(){this.head=null,this.tail=null};e.prototype={add:function(t){var e={item:t,next:null},r=this.tail;r?r.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}},t.exports=e},4239:(t,e,r)=>{"use strict";var n=r(7136),s=TypeError;t.exports=function(t){if(n(t))throw new s("Can't call method on "+t);return t}},2098:(t,e,r)=>{"use strict";var n=r(5951),s=r(9447),o=Object.getOwnPropertyDescriptor;t.exports=function(t){if(!s)return n[t];var e=o(n,t);return e&&e.value}},485:(t,e,r)=>{"use strict";var n,s=r(5951),o=r(6024),i=r(2250),a=r(2832),c=r(6794),u=r(3427),l=r(4787),h=s.Function,p=/MSIE .\./.test(c)||"BUN"===a&&((n=s.Bun.version.split(".")).length<3||"0"===n[0]&&(n[1]<3||"3"===n[1]&&"0"===n[2]));t.exports=function(t,e){var r=e?2:1;return p?function(n,s){var a=l(arguments.length,1)>r,c=i(n)?n:h(n),p=a?u(arguments,r):[],d=a?function(){o(c,this,p)}:c;return e?t(d,s):t(d)}:t}},7118:(t,e,r)=>{"use strict";var n=r(5582),s=r(9251),o=r(6264),i=r(9447),a=o("species");t.exports=function(t){var e=n(t);i&&e&&!e[a]&&s(e,a,{configurable:!0,get:function(){return this}})}},4840:(t,e,r)=>{"use strict";var n=r(2623),s=r(4284).f,o=r(1626),i=r(9724),a=r(4878),c=r(6264)("toStringTag");t.exports=function(t,e,r,u){var l=r?t:t&&t.prototype;l&&(i(l,c)||s(l,c,{configurable:!0,value:e}),u&&!n&&o(l,"toString",a))}},2522:(t,e,r)=>{"use strict";var n=r(5816),s=r(6499),o=n("keys");t.exports=function(t){return o[t]||(o[t]=s(t))}},6128:(t,e,r)=>{"use strict";var n=r(7376),s=r(5951),o=r(2532),i="__core-js_shared__",a=t.exports=s[i]||o(i,{});(a.versions||(a.versions=[])).push({version:"3.45.0",mode:n?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.45.0/LICENSE",source:"https://github.com/zloirock/core-js"})},5816:(t,e,r)=>{"use strict";var n=r(6128);t.exports=function(t,e){return n[t]||(n[t]=e||{})}},8450:(t,e,r)=>{"use strict";var n=r(6624),s=r(2235),o=r(7136),i=r(6264)("species");t.exports=function(t,e){var r,a=n(t).constructor;return void 0===a||o(r=n(a)[i])?e:s(r)}},1470:(t,e,r)=>{"use strict";var n=r(1907),s=r(5482),o=r(160),i=r(4239),a=n("".charAt),c=n("".charCodeAt),u=n("".slice),l=function(t){return function(e,r){var n,l,h=o(i(e)),p=s(r),d=h.length;return p<0||p>=d?t?"":void 0:(n=c(h,p))<55296||n>56319||p+1===d||(l=c(h,p+1))<56320||l>57343?t?a(h,p):n:t?u(h,p,p+2):l-56320+(n-55296<<10)+65536}};t.exports={codeAt:l(!1),charAt:l(!0)}},1164:(t,e,r)=>{"use strict";var n=r(1907),s=r(3121),o=r(160),i=r(9314),a=r(4239),c=n(i),u=n("".slice),l=Math.ceil,h=function(t){return function(e,r,n){var i,h,p=o(a(e)),d=s(r),f=p.length,g=void 0===n?" ":o(n);return d<=f||""===g?p:((h=c(g,l((i=d-f)/g.length))).length>i&&(h=u(h,0,i)),t?p+h:h+p)}};t.exports={start:h(!1),end:h(!0)}},9156:(t,e,r)=>{"use strict";var n=r(1907),s=2147483647,o=/[^\0-\u007E]/,i=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",c=RangeError,u=n(i.exec),l=Math.floor,h=String.fromCharCode,p=n("".charCodeAt),d=n([].join),f=n([].push),g=n("".replace),v=n("".split),m=n("".toLowerCase),w=function(t){return t+22+75*(t<26)},y=function(t,e,r){var n=0;for(t=r?l(t/700):t>>1,t+=l(t/e);t>455;)t=l(t/35),n+=36;return l(n+36*t/(t+38))},x=function(t){var e=[];t=function(t){for(var e=[],r=0,n=t.length;r<n;){var s=p(t,r++);if(s>=55296&&s<=56319&&r<n){var o=p(t,r++);56320==(64512&o)?f(e,((1023&s)<<10)+(1023&o)+65536):(f(e,s),r--)}else f(e,s)}return e}(t);var r,n,o=t.length,i=128,u=0,g=72;for(r=0;r<t.length;r++)(n=t[r])<128&&f(e,h(n));var v=e.length,m=v;for(v&&f(e,"-");m<o;){var x=s;for(r=0;r<t.length;r++)(n=t[r])>=i&&n<x&&(x=n);var _=m+1;if(x-i>l((s-u)/_))throw new c(a);for(u+=(x-i)*_,i=x,r=0;r<t.length;r++){if((n=t[r])<i&&++u>s)throw new c(a);if(n===i){for(var b=u,S=36;;){var k=S<=g?1:S>=g+26?26:S-g;if(b<k)break;var T=b-k,A=36-k;f(e,h(w(k+T%A))),b=l(T/A),S+=36}f(e,h(w(b))),g=y(u,_,m===v),u=0,m++}}u++,i++}return d(e,"")};t.exports=function(t){var e,r,n=[],s=v(g(m(t),i,"."),".");for(e=0;e<s.length;e++)r=s[e],f(n,u(o,r)?"xn--"+x(r):r);return d(n,".")}},9314:(t,e,r)=>{"use strict";var n=r(5482),s=r(160),o=r(4239),i=RangeError;t.exports=function(t){var e=s(o(this)),r="",a=n(t);if(a<0||a===1/0)throw new i("Wrong number of repetitions");for(;a>0;(a>>>=1)&&(e+=e))1&a&&(r+=e);return r}},5819:(t,e,r)=>{"use strict";var n=r(6833).PROPER,s=r(8828),o=r(6395);t.exports=function(t){return s(function(){return!!o[t]()||"​᠎"!=="​᠎"[t]()||n&&o[t].name!==t})}},5993:(t,e,r)=>{"use strict";var n=r(1907),s=r(4239),o=r(160),i=r(6395),a=n("".replace),c=RegExp("^["+i+"]+"),u=RegExp("(^|[^"+i+"])["+i+"]+$"),l=function(t){return function(e){var r=o(s(e));return 1&t&&(r=a(r,c,"")),2&t&&(r=a(r,u,"$1")),r}};t.exports={start:l(1),end:l(2),trim:l(3)}},9846:(t,e,r)=>{"use strict";var n=r(798),s=r(8828),o=r(5951).String;t.exports=!!Object.getOwnPropertySymbols&&!s(function(){var t=Symbol("symbol detection");return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41})},3467:(t,e,r)=>{"use strict";var n=r(3930),s=r(5582),o=r(6264),i=r(8055);t.exports=function(){var t=s("Symbol"),e=t&&t.prototype,r=e&&e.valueOf,a=o("toPrimitive");e&&!e[a]&&i(e,a,function(t){return n(r,this)},{arity:1})}},2595:(t,e,r)=>{"use strict";var n=r(5582),s=r(1907),o=n("Symbol"),i=o.keyFor,a=s(o.prototype.valueOf);t.exports=o.isRegisteredSymbol||function(t){try{return void 0!==i(a(t))}catch(t){return!1}}},9197:(t,e,r)=>{"use strict";for(var n=r(5816),s=r(5582),o=r(1907),i=r(5594),a=r(6264),c=s("Symbol"),u=c.isWellKnownSymbol,l=s("Object","getOwnPropertyNames"),h=o(c.prototype.valueOf),p=n("wks"),d=0,f=l(c),g=f.length;d<g;d++)try{var v=f[d];i(c[v])&&a(v)}catch(t){}t.exports=function(t){if(u&&u(t))return!0;try{for(var e=h(t),r=0,n=l(p),s=n.length;r<s;r++)if(p[n[r]]==e)return!0}catch(t){}return!1}},4411:(t,e,r)=>{"use strict";var n=r(9846);t.exports=n&&!!Symbol.for&&!!Symbol.keyFor},9472:(t,e,r)=>{"use strict";var n,s,o,i,a=r(5951),c=r(6024),u=r(8311),l=r(2250),h=r(9724),p=r(8828),d=r(2416),f=r(3427),g=r(9552),v=r(4787),m=r(1829),w=r(7586),y=a.setImmediate,x=a.clearImmediate,_=a.process,b=a.Dispatch,S=a.Function,k=a.MessageChannel,T=a.String,A=0,C={},P="onreadystatechange";p(function(){n=a.location});var O=function(t){if(h(C,t)){var e=C[t];delete C[t],e()}},j=function(t){return function(){O(t)}},R=function(t){O(t.data)},U=function(t){a.postMessage(T(t),n.protocol+"//"+n.host)};y&&x||(y=function(t){v(arguments.length,1);var e=l(t)?t:S(t),r=f(arguments,1);return C[++A]=function(){c(e,void 0,r)},s(A),A},x=function(t){delete C[t]},w?s=function(t){_.nextTick(j(t))}:b&&b.now?s=function(t){b.now(j(t))}:k&&!m?(i=(o=new k).port2,o.port1.onmessage=R,s=u(i.postMessage,i)):a.addEventListener&&l(a.postMessage)&&!a.importScripts&&n&&"file:"!==n.protocol&&!p(U)?(s=U,a.addEventListener("message",R,!1)):s=P in g("script")?function(t){d.appendChild(g("script"))[P]=function(){d.removeChild(this),O(t)}}:function(t){setTimeout(j(t),0)}),t.exports={set:y,clear:x}},4849:(t,e,r)=>{"use strict";var n=r(5482),s=Math.max,o=Math.min;t.exports=function(t,e){var r=n(t);return r<0?s(r+e,0):o(r,e)}},7374:(t,e,r)=>{"use strict";var n=r(6946),s=r(4239);t.exports=function(t){return n(s(t))}},5482:(t,e,r)=>{"use strict";var n=r(1176);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},3121:(t,e,r)=>{"use strict";var n=r(5482),s=Math.min;t.exports=function(t){var e=n(t);return e>0?s(e,9007199254740991):0}},9298:(t,e,r)=>{"use strict";var n=r(4239),s=Object;t.exports=function(t){return s(n(t))}},6028:(t,e,r)=>{"use strict";var n=r(3930),s=r(6285),o=r(5594),i=r(9367),a=r(581),c=r(6264),u=TypeError,l=c("toPrimitive");t.exports=function(t,e){if(!s(t)||o(t))return t;var r,c=i(t,l);if(c){if(void 0===e&&(e="default"),r=n(c,t,e),!s(r)||o(r))return r;throw new u("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},470:(t,e,r)=>{"use strict";var n=r(6028),s=r(5594);t.exports=function(t){var e=n(t,"string");return s(e)?e:e+""}},2623:(t,e,r)=>{"use strict";var n={};n[r(6264)("toStringTag")]="z",t.exports="[object z]"===String(n)},160:(t,e,r)=>{"use strict";var n=r(3948),s=String;t.exports=function(t){if("Symbol"===n(t))throw new TypeError("Cannot convert a Symbol value to a string");return s(t)}},4640:t=>{"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},6499:(t,e,r)=>{"use strict";var n=r(1907),s=0,o=Math.random(),i=n(1.1.toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+i(++s+o,36)}},4791:(t,e,r)=>{"use strict";var n=r(8828),s=r(6264),o=r(9447),i=r(7376),a=s("iterator");t.exports=!n(function(){var t=new URL("b?a=1&b=2&c=3","https://a"),e=t.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return t.pathname="c%20d",e.forEach(function(t,r){e.delete("b"),n+=r+t}),r.delete("a",2),r.delete("b",void 0),i&&(!t.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!e.size&&(i||!o)||!e.sort||"https://a/c%20d?a=1&c=3"!==t.href||"3"!==e.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!e[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://тест").host||"#%D0%B1"!==new URL("https://a#б").hash||"a1c3"!==n||"x"!==new URL("https://x",void 0).host})},1175:(t,e,r)=>{"use strict";var n=r(9846);t.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8661:(t,e,r)=>{"use strict";var n=r(9447),s=r(8828);t.exports=n&&s(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},4787:t=>{"use strict";var e=TypeError;t.exports=function(t,r){if(t<r)throw new e("Not enough arguments");return t}},551:(t,e,r)=>{"use strict";var n=r(5951),s=r(2250),o=n.WeakMap;t.exports=s(o)&&/native code/.test(String(o))},366:(t,e,r)=>{"use strict";var n=r(2046),s=r(9724),o=r(560),i=r(4284).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});s(e,t)||i(e,t,{value:o.f(t)})}},560:(t,e,r)=>{"use strict";var n=r(6264);e.f=n},6264:(t,e,r)=>{"use strict";var n=r(5951),s=r(5816),o=r(9724),i=r(6499),a=r(9846),c=r(1175),u=n.Symbol,l=s("wks"),h=c?u.for||u:u&&u.withoutSetter||i;t.exports=function(t){return o(l,t)||(l[t]=a&&o(u,t)?u[t]:h("Symbol."+t)),l[t]}},6395:t=>{"use strict";t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},2048:(t,e,r)=>{"use strict";var n=r(1091),s=r(8280),o=r(5972),i=r(9192),a=r(9595),c=r(8075),u=r(1626),l=r(5817),h=r(9259),p=r(5884),d=r(4823),f=r(2096),g=r(6264)("toStringTag"),v=Error,m=[].push,w=function(t,e){var r,n=s(y,this);i?r=i(new v,n?o(this):y):(r=n?this:c(y),u(r,g,"Error")),void 0!==e&&u(r,"message",f(e)),p(r,w,r.stack,1),arguments.length>2&&h(r,arguments[2]);var a=[];return d(t,m,{that:a}),u(r,"errors",a),r};i?i(w,v):a(w,v,{name:!0});var y=w.prototype=c(v.prototype,{constructor:l(1,w),message:l(1,""),name:l(1,"AggregateError")});n({global:!0,constructor:!0,arity:2},{AggregateError:w})},4502:(t,e,r)=>{"use strict";r(2048)},8545:(t,e,r)=>{"use strict";var n=r(1091),s=r(8828),o=r(1793),i=r(6285),a=r(9298),c=r(575),u=r(8024),l=r(5543),h=r(6968),p=r(7171),d=r(6264),f=r(798),g=d("isConcatSpreadable"),v=f>=51||!s(function(){var t=[];return t[g]=!1,t.concat()[0]!==t}),m=function(t){if(!i(t))return!1;var e=t[g];return void 0!==e?!!e:o(t)};n({target:"Array",proto:!0,arity:1,forced:!v||!p("concat")},{concat:function(t){var e,r,n,s,o,i=a(this),p=h(i,0),d=0;for(e=-1,n=arguments.length;e<n;e++)if(m(o=-1===e?i:arguments[e]))for(s=c(o),u(d+s),r=0;r<s;r++,d++)r in o&&l(p,d,o[r]);else u(d+1),l(p,d++,o);return p.length=d,p}})},9295:(t,e,r)=>{"use strict";var n=r(1091),s=r(726).filter;n({target:"Array",proto:!0,forced:!r(7171)("filter")},{filter:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},6290:(t,e,r)=>{"use strict";var n=r(1091),s=r(726).find,o=r(2156),i="find",a=!0;i in[]&&Array(1)[i](function(){a=!1}),n({target:"Array",proto:!0,forced:a},{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),o(i)},5650:(t,e,r)=>{"use strict";var n=r(1091),s=r(2914);n({target:"Array",proto:!0,forced:[].forEach!==s},{forEach:s})},9748:(t,e,r)=>{"use strict";var n=r(1091),s=r(4436).includes,o=r(8828),i=r(2156);n({target:"Array",proto:!0,forced:o(function(){return!Array(1).includes()})},{includes:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),i("includes")},6391:(t,e,r)=>{"use strict";var n=r(1091),s=r(2361),o=r(4436).indexOf,i=r(7623),a=s([].indexOf),c=!!a&&1/a([1],1,-0)<0;n({target:"Array",proto:!0,forced:c||!i("indexOf")},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return c?a(this,t,e)||0:o(this,t,e)}})},2425:(t,e,r)=>{"use strict";r(1091)({target:"Array",stat:!0},{isArray:r(1793)})},9363:(t,e,r)=>{"use strict";var n=r(7374),s=r(2156),o=r(3742),i=r(4932),a=r(4284).f,c=r(183),u=r(9550),l=r(7376),h=r(9447),p="Array Iterator",d=i.set,f=i.getterFor(p);t.exports=c(Array,"Array",function(t,e){d(this,{type:p,target:n(t),index:0,kind:e})},function(){var t=f(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=null,u(void 0,!0);switch(t.kind){case"keys":return u(r,!1);case"values":return u(e[r],!1)}return u([r,e[r]],!1)},"values");var g=o.Arguments=o.Array;if(s("keys"),s("values"),s("entries"),!l&&h&&"values"!==g.name)try{a(g,"name",{value:"values"})}catch(t){}},6339:(t,e,r)=>{"use strict";var n=r(1091),s=r(5043).left,o=r(7623),i=r(798);n({target:"Array",proto:!0,forced:!r(7586)&&i>79&&i<83||!o("reduce")},{reduce:function(t){var e=arguments.length;return s(this,t,e,e>1?arguments[1]:void 0)}})},521:(t,e,r)=>{"use strict";var n=r(1091),s=r(726).some;n({target:"Array",proto:!0,forced:!r(7623)("some")},{some:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})},6737:(t,e,r)=>{"use strict";var n=r(1091),s=r(1907),o=r(2159),i=r(9298),a=r(575),c=r(4535),u=r(160),l=r(8828),h=r(4321),p=r(7623),d=r(3440),f=r(4328),g=r(798),v=r(3786),m=[],w=s(m.sort),y=s(m.push),x=l(function(){m.sort(void 0)}),_=l(function(){m.sort(null)}),b=p("sort"),S=!l(function(){if(g)return g<70;if(!(d&&d>3)){if(f)return!0;if(v)return v<603;var t,e,r,n,s="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:r=3;break;case 68:case 71:r=4;break;default:r=2}for(n=0;n<47;n++)m.push({k:e+n,v:r})}for(m.sort(function(t,e){return e.v-t.v}),n=0;n<m.length;n++)e=m[n].k.charAt(0),s.charAt(s.length-1)!==e&&(s+=e);return"DGBEFHACIJK"!==s}});n({target:"Array",proto:!0,forced:x||!_||!b||!S},{sort:function(t){void 0!==t&&o(t);var e=i(this);if(S)return void 0===t?w(e):w(e,t);var r,n,s=[],l=a(e);for(n=0;n<l;n++)n in e&&y(s,e[n]);for(h(s,function(t){return function(e,r){return void 0===r?-1:void 0===e?1:void 0!==t?+t(e,r)||0:u(e)>u(r)?1:-1}}(t)),r=a(s),n=0;n<r;)e[n]=s[n++];for(;n<l;)c(e,n++);return e}})},5362:(t,e,r)=>{"use strict";var n=r(1091),s=r(1907),o=Date,i=s(o.prototype.getTime);n({target:"Date",stat:!0},{now:function(){return i(new o)}})},6648:(t,e,r)=>{"use strict";var n=r(1091),s=r(3930),o=r(9298),i=r(6028),a=r(3701),c=r(5807);n({target:"Date",proto:!0,forced:r(8828)(function(){return null!==new Date(NaN).toJSON()||1!==s(Date.prototype.toJSON,{toISOString:function(){return 1}})})},{toJSON:function(t){var e=o(this),r=i(e,"number");return"number"!=typeof r||isFinite(r)?"toISOString"in e||"Date"!==c(e)?e.toISOString():s(a,e):null}})},8537:()=>{},9721:(t,e,r)=>{"use strict";var n=r(1091),s=r(5582),o=r(6024),i=r(3930),a=r(1907),c=r(8828),u=r(2250),l=r(5594),h=r(3427),p=r(6656),d=r(9846),f=String,g=s("JSON","stringify"),v=a(/./.exec),m=a("".charAt),w=a("".charCodeAt),y=a("".replace),x=a(1.1.toString),_=/[\uD800-\uDFFF]/g,b=/^[\uD800-\uDBFF]$/,S=/^[\uDC00-\uDFFF]$/,k=!d||c(function(){var t=s("Symbol")("stringify detection");return"[null]"!==g([t])||"{}"!==g({a:t})||"{}"!==g(Object(t))}),T=c(function(){return'"\\udf06\\ud834"'!==g("\udf06\ud834")||'"\\udead"'!==g("\udead")}),A=function(t,e){var r=h(arguments),n=p(e);if(u(n)||void 0!==t&&!l(t))return r[1]=function(t,e){if(u(n)&&(e=i(n,this,f(t),e)),!l(e))return e},o(g,null,r)},C=function(t,e,r){var n=m(r,e-1),s=m(r,e+1);return v(b,t)&&!v(S,s)||v(S,t)&&!v(b,n)?"\\u"+x(w(t,0),16):t};g&&n({target:"JSON",stat:!0,arity:3,forced:k||T},{stringify:function(t,e,r){var n=h(arguments),s=o(k?A:g,null,n);return T&&"string"==typeof s?y(s,_,C):s}})},7024:(t,e,r)=>{"use strict";var n=r(5951);r(4840)(n.JSON,"JSON",!0)},8172:()=>{},1340:(t,e,r)=>{"use strict";var n=r(1091),s=r(9538);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==s},{assign:s})},7810:(t,e,r)=>{"use strict";var n=r(1091),s=r(9447),o=r(2220).f;n({target:"Object",stat:!0,forced:Object.defineProperties!==o,sham:!s},{defineProperties:o})},6750:(t,e,r)=>{"use strict";var n=r(1091),s=r(9447),o=r(4284).f;n({target:"Object",stat:!0,forced:Object.defineProperty!==o,sham:!s},{defineProperty:o})},7052:(t,e,r)=>{"use strict";var n=r(1091),s=r(8828),o=r(7374),i=r(3846).f,a=r(9447);n({target:"Object",stat:!0,forced:!a||s(function(){i(1)}),sham:!a},{getOwnPropertyDescriptor:function(t,e){return i(o(t),e)}})},179:(t,e,r)=>{"use strict";var n=r(1091),s=r(9447),o=r(1042),i=r(7374),a=r(3846),c=r(5543);n({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(t){for(var e,r,n=i(t),s=a.f,u=o(n),l={},h=0;u.length>h;)void 0!==(r=s(n,e=u[h++]))&&c(l,e,r);return l}})},5264:(t,e,r)=>{"use strict";var n=r(1091),s=r(9846),o=r(8828),i=r(7170),a=r(9298);n({target:"Object",stat:!0,forced:!s||o(function(){i.f(1)})},{getOwnPropertySymbols:function(t){var e=i.f;return e?e(a(t)):[]}})},3589:(t,e,r)=>{"use strict";var n=r(1091),s=r(9298),o=r(2875);n({target:"Object",stat:!0,forced:r(8828)(function(){o(1)})},{keys:function(t){return o(s(t))}})},3643:()=>{},7450:(t,e,r)=>{"use strict";var n=r(1091),s=r(3930),o=r(2159),i=r(6254),a=r(4420),c=r(4823);n({target:"Promise",stat:!0,forced:r(3282)},{allSettled:function(t){var e=this,r=i.f(e),n=r.resolve,u=r.reject,l=a(function(){var r=o(e.resolve),i=[],a=0,u=1;c(t,function(t){var o=a++,c=!1;u++,s(r,e,t).then(function(t){c||(c=!0,i[o]={status:"fulfilled",value:t},--u||n(i))},function(t){c||(c=!0,i[o]={status:"rejected",reason:t},--u||n(i))})}),--u||n(i)});return l.error&&u(l.value),r.promise}})},6630:(t,e,r)=>{"use strict";var n=r(1091),s=r(3930),o=r(2159),i=r(6254),a=r(4420),c=r(4823);n({target:"Promise",stat:!0,forced:r(3282)},{all:function(t){var e=this,r=i.f(e),n=r.resolve,u=r.reject,l=a(function(){var r=o(e.resolve),i=[],a=0,l=1;c(t,function(t){var o=a++,c=!1;l++,s(r,e,t).then(function(t){c||(c=!0,i[o]=t,--l||n(i))},u)}),--l||n(i)});return l.error&&u(l.value),r.promise}})},6415:(t,e,r)=>{"use strict";var n=r(1091),s=r(3930),o=r(2159),i=r(5582),a=r(6254),c=r(4420),u=r(4823),l=r(3282),h="No one promise resolved";n({target:"Promise",stat:!0,forced:l},{any:function(t){var e=this,r=i("AggregateError"),n=a.f(e),l=n.resolve,p=n.reject,d=c(function(){var n=o(e.resolve),i=[],a=0,c=1,d=!1;u(t,function(t){var o=a++,u=!1;c++,s(n,e,t).then(function(t){u||d||(d=!0,l(t))},function(t){u||d||(u=!0,i[o]=t,--c||p(new r(i,h)))})}),--c||p(new r(i,h))});return d.error&&p(d.value),n.promise}})},1866:(t,e,r)=>{"use strict";var n=r(1091),s=r(7376),o=r(1759).CONSTRUCTOR,i=r(5463),a=r(5582),c=r(2250),u=r(8055),l=i&&i.prototype;if(n({target:"Promise",proto:!0,forced:o,real:!0},{catch:function(t){return this.then(void 0,t)}}),!s&&c(i)){var h=a("Promise").prototype.catch;l.catch!==h&&u(l,"catch",h,{unsafe:!0})}},3825:(t,e,r)=>{"use strict";var n,s,o,i,a=r(1091),c=r(7376),u=r(7586),l=r(5951),h=r(2046),p=r(3930),d=r(8055),f=r(9192),g=r(4840),v=r(7118),m=r(2159),w=r(2250),y=r(6285),x=r(9596),_=r(8450),b=r(9472).set,S=r(2292),k=r(3904),T=r(4420),A=r(9245),C=r(4932),P=r(5463),O=r(1759),j=r(6254),R="Promise",U=O.CONSTRUCTOR,L=O.REJECTION_EVENT,E=O.SUBCLASSING,I=C.getterFor(R),D=C.set,M=P&&P.prototype,F=P,N=M,B=l.TypeError,W=l.document,q=l.process,V=j.f,H=V,z=!!(W&&W.createEvent&&l.dispatchEvent),K="unhandledrejection",G=function(t){var e;return!(!y(t)||!w(e=t.then))&&e},X=function(t,e){var r,n,s,o=e.value,i=1===e.state,a=i?t.ok:t.fail,c=t.resolve,u=t.reject,l=t.domain;try{a?(i||(2===e.rejection&&Z(e),e.rejection=1),!0===a?r=o:(l&&l.enter(),r=a(o),l&&(l.exit(),s=!0)),r===t.promise?u(new B("Promise-chain cycle")):(n=G(r))?p(n,r,c,u):c(r)):u(o)}catch(t){l&&!s&&l.exit(),u(t)}},J=function(t,e){t.notified||(t.notified=!0,S(function(){for(var r,n=t.reactions;r=n.get();)X(r,t);t.notified=!1,e&&!t.rejection&&Y(t)}))},$=function(t,e,r){var n,s;z?((n=W.createEvent("Event")).promise=e,n.reason=r,n.initEvent(t,!1,!0),l.dispatchEvent(n)):n={promise:e,reason:r},!L&&(s=l["on"+t])?s(n):t===K&&k("Unhandled promise rejection",r)},Y=function(t){p(b,l,function(){var e,r=t.facade,n=t.value;if(Q(t)&&(e=T(function(){u?q.emit("unhandledRejection",n,r):$(K,r,n)}),t.rejection=u||Q(t)?2:1,e.error))throw e.value})},Q=function(t){return 1!==t.rejection&&!t.parent},Z=function(t){p(b,l,function(){var e=t.facade;u?q.emit("rejectionHandled",e):$("rejectionhandled",e,t.value)})},tt=function(t,e,r){return function(n){t(e,n,r)}},et=function(t,e,r){t.done||(t.done=!0,r&&(t=r),t.value=e,t.state=2,J(t,!0))},rt=function(t,e,r){if(!t.done){t.done=!0,r&&(t=r);try{if(t.facade===e)throw new B("Promise can't be resolved itself");var n=G(e);n?S(function(){var r={done:!1};try{p(n,e,tt(rt,r,t),tt(et,r,t))}catch(e){et(r,e,t)}}):(t.value=e,t.state=1,J(t,!1))}catch(e){et({done:!1},e,t)}}};if(U&&(N=(F=function(t){x(this,N),m(t),p(n,this);var e=I(this);try{t(tt(rt,e),tt(et,e))}catch(t){et(e,t)}}).prototype,(n=function(t){D(this,{type:R,done:!1,notified:!1,parent:!1,reactions:new A,rejection:!1,state:0,value:null})}).prototype=d(N,"then",function(t,e){var r=I(this),n=V(_(this,F));return r.parent=!0,n.ok=!w(t)||t,n.fail=w(e)&&e,n.domain=u?q.domain:void 0,0===r.state?r.reactions.add(n):S(function(){X(n,r)}),n.promise}),s=function(){var t=new n,e=I(t);this.promise=t,this.resolve=tt(rt,e),this.reject=tt(et,e)},j.f=V=function(t){return t===F||t===o?new s(t):H(t)},!c&&w(P)&&M!==Object.prototype)){i=M.then,E||d(M,"then",function(t,e){var r=this;return new F(function(t,e){p(i,r,t,e)}).then(t,e)},{unsafe:!0});try{delete M.constructor}catch(t){}f&&f(M,N)}a({global:!0,constructor:!0,wrap:!0,forced:U},{Promise:F}),o=h.Promise,g(F,R,!1,!0),v(R)},7714:(t,e,r)=>{"use strict";var n=r(1091),s=r(7376),o=r(5463),i=r(8828),a=r(5582),c=r(2250),u=r(8450),l=r(3569),h=r(8055),p=o&&o.prototype;if(n({target:"Promise",proto:!0,real:!0,forced:!!o&&i(function(){p.finally.call({then:function(){}},function(){})})},{finally:function(t){var e=u(this,a("Promise")),r=c(t);return this.then(r?function(r){return l(e,t()).then(function(){return r})}:t,r?function(r){return l(e,t()).then(function(){throw r})}:t)}}),!s&&c(o)){var d=a("Promise").prototype.finally;p.finally!==d&&h(p,"finally",d,{unsafe:!0})}},5931:(t,e,r)=>{"use strict";r(3825),r(6630),r(1866),r(2736),r(7286),r(6761)},2736:(t,e,r)=>{"use strict";var n=r(1091),s=r(3930),o=r(2159),i=r(6254),a=r(4420),c=r(4823);n({target:"Promise",stat:!0,forced:r(3282)},{race:function(t){var e=this,r=i.f(e),n=r.reject,u=a(function(){var i=o(e.resolve);c(t,function(t){s(i,e,t).then(r.resolve,n)})});return u.error&&n(u.value),r.promise}})},7286:(t,e,r)=>{"use strict";var n=r(1091),s=r(6254);n({target:"Promise",stat:!0,forced:r(1759).CONSTRUCTOR},{reject:function(t){var e=s.f(this);return(0,e.reject)(t),e.promise}})},6761:(t,e,r)=>{"use strict";var n=r(1091),s=r(5582),o=r(7376),i=r(5463),a=r(1759).CONSTRUCTOR,c=r(3569),u=s("Promise"),l=o&&!a;n({target:"Promise",stat:!0,forced:o||a},{resolve:function(t){return c(l&&this===u?i:this,t)}})},7380:(t,e,r)=>{"use strict";var n=r(1091),s=r(5951),o=r(6024),i=r(3427),a=r(6254),c=r(2159),u=r(4420),l=s.Promise,h=!1;n({target:"Promise",stat:!0,forced:!l||!l.try||u(function(){l.try(function(t){h=8===t},8)}).error||!h},{try:function(t){var e=arguments.length>1?i(arguments,1):[],r=a.f(this),n=u(function(){return o(c(t),void 0,e)});return(n.error?r.reject:r.resolve)(n.value),r.promise}})},5823:(t,e,r)=>{"use strict";var n=r(1091),s=r(6254);n({target:"Promise",stat:!0},{withResolvers:function(){var t=s.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})},5205:()=>{},1074:(t,e,r)=>{"use strict";var n=r(1091),s=r(1907),o=r(4849),i=RangeError,a=String.fromCharCode,c=String.fromCodePoint,u=s([].join);n({target:"String",stat:!0,arity:1,forced:!!c&&1!==c.length},{fromCodePoint:function(t){for(var e,r=[],n=arguments.length,s=0;n>s;){if(e=+arguments[s++],o(e,1114111)!==e)throw new i(e+" is not a valid code point");r[s]=e<65536?a(e):a(55296+((e-=65536)>>10),e%1024+56320)}return u(r,"")}})},9770:(t,e,r)=>{"use strict";var n=r(1091),s=r(1907),o=r(2074),i=r(4239),a=r(160),c=r(5735),u=s("".indexOf);n({target:"String",proto:!0,forced:!c("includes")},{includes:function(t){return!!~u(a(i(this)),a(o(t)),arguments.length>1?arguments[1]:void 0)}})},7057:(t,e,r)=>{"use strict";var n=r(1470).charAt,s=r(160),o=r(4932),i=r(183),a=r(9550),c="String Iterator",u=o.set,l=o.getterFor(c);i(String,"String",function(t){u(this,{type:c,string:s(t),index:0})},function(){var t,e=l(this),r=e.string,s=e.index;return s>=r.length?a(void 0,!0):(t=n(r,s),e.index+=t.length,a(t,!1))})},2395:(t,e,r)=>{"use strict";var n,s=r(1091),o=r(2361),i=r(3846).f,a=r(3121),c=r(160),u=r(2074),l=r(4239),h=r(5735),p=r(7376),d=o("".slice),f=Math.min,g=h("startsWith");s({target:"String",proto:!0,forced:!!(p||g||(n=i(String.prototype,"startsWith"),!n||n.writable))&&!g},{startsWith:function(t){var e=c(l(this));u(t);var r=a(f(arguments.length>1?arguments[1]:void 0,e.length)),n=c(t);return d(e,r,r+n.length)===n}})},727:(t,e,r)=>{"use strict";var n=r(1091),s=r(5993);n({target:"String",proto:!0,forced:r(5819)("trim")},{trim:function(){return s(this)}})},5546:(t,e,r)=>{"use strict";r(366)("asyncDispose")},3997:(t,e,r)=>{"use strict";r(366)("asyncIterator")},3674:(t,e,r)=>{"use strict";var n=r(1091),s=r(5951),o=r(3930),i=r(1907),a=r(7376),c=r(9447),u=r(9846),l=r(8828),h=r(9724),p=r(8280),d=r(6624),f=r(7374),g=r(470),v=r(160),m=r(5817),w=r(8075),y=r(2875),x=r(4443),_=r(5407),b=r(7170),S=r(3846),k=r(4284),T=r(2220),A=r(2574),C=r(8055),P=r(9251),O=r(5816),j=r(2522),R=r(8530),U=r(6499),L=r(6264),E=r(560),I=r(366),D=r(3467),M=r(4840),F=r(4932),N=r(726).forEach,B=j("hidden"),W="Symbol",q="prototype",V=F.set,H=F.getterFor(W),z=Object[q],K=s.Symbol,G=K&&K[q],X=s.RangeError,J=s.TypeError,$=s.QObject,Y=S.f,Q=k.f,Z=_.f,tt=A.f,et=i([].push),rt=O("symbols"),nt=O("op-symbols"),st=O("wks"),ot=!$||!$[q]||!$[q].findChild,it=function(t,e,r){var n=Y(z,e);n&&delete z[e],Q(t,e,r),n&&t!==z&&Q(z,e,n)},at=c&&l(function(){return 7!==w(Q({},"a",{get:function(){return Q(this,"a",{value:7}).a}})).a})?it:Q,ct=function(t,e){var r=rt[t]=w(G);return V(r,{type:W,tag:t,description:e}),c||(r.description=e),r},ut=function(t,e,r){t===z&&ut(nt,e,r),d(t);var n=g(e);return d(r),h(rt,n)?(r.enumerable?(h(t,B)&&t[B][n]&&(t[B][n]=!1),r=w(r,{enumerable:m(0,!1)})):(h(t,B)||Q(t,B,m(1,w(null))),t[B][n]=!0),at(t,n,r)):Q(t,n,r)},lt=function(t,e){d(t);var r=f(e),n=y(r).concat(ft(r));return N(n,function(e){c&&!o(ht,r,e)||ut(t,e,r[e])}),t},ht=function(t){var e=g(t),r=o(tt,this,e);return!(this===z&&h(rt,e)&&!h(nt,e))&&(!(r||!h(this,e)||!h(rt,e)||h(this,B)&&this[B][e])||r)},pt=function(t,e){var r=f(t),n=g(e);if(r!==z||!h(rt,n)||h(nt,n)){var s=Y(r,n);return!s||!h(rt,n)||h(r,B)&&r[B][n]||(s.enumerable=!0),s}},dt=function(t){var e=Z(f(t)),r=[];return N(e,function(t){h(rt,t)||h(R,t)||et(r,t)}),r},ft=function(t){var e=t===z,r=Z(e?nt:f(t)),n=[];return N(r,function(t){!h(rt,t)||e&&!h(z,t)||et(n,rt[t])}),n};u||(C(G=(K=function(){if(p(G,this))throw new J("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?v(arguments[0]):void 0,e=U(t),r=function(t){var n=void 0===this?s:this;n===z&&o(r,nt,t),h(n,B)&&h(n[B],e)&&(n[B][e]=!1);var i=m(1,t);try{at(n,e,i)}catch(t){if(!(t instanceof X))throw t;it(n,e,i)}};return c&&ot&&at(z,e,{configurable:!0,set:r}),ct(e,t)})[q],"toString",function(){return H(this).tag}),C(K,"withoutSetter",function(t){return ct(U(t),t)}),A.f=ht,k.f=ut,T.f=lt,S.f=pt,x.f=_.f=dt,b.f=ft,E.f=function(t){return ct(L(t),t)},c&&(P(G,"description",{configurable:!0,get:function(){return H(this).description}}),a||C(z,"propertyIsEnumerable",ht,{unsafe:!0}))),n({global:!0,constructor:!0,wrap:!0,forced:!u,sham:!u},{Symbol:K}),N(y(st),function(t){I(t)}),n({target:W,stat:!0,forced:!u},{useSetter:function(){ot=!0},useSimple:function(){ot=!1}}),n({target:"Object",stat:!0,forced:!u,sham:!c},{create:function(t,e){return void 0===e?w(t):lt(w(t),e)},defineProperty:ut,defineProperties:lt,getOwnPropertyDescriptor:pt}),n({target:"Object",stat:!0,forced:!u},{getOwnPropertyNames:dt}),D(),M(K,W),R[B]=!0},5084:()=>{},2499:(t,e,r)=>{"use strict";r(366)("dispose")},3313:(t,e,r)=>{"use strict";var n=r(1091),s=r(5582),o=r(9724),i=r(160),a=r(5816),c=r(4411),u=a("string-to-symbol-registry"),l=a("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!c},{for:function(t){var e=i(t);if(o(u,e))return u[e];var r=s("Symbol")(e);return u[e]=r,l[r]=e,r}})},2596:(t,e,r)=>{"use strict";r(366)("hasInstance")},5721:(t,e,r)=>{"use strict";r(366)("isConcatSpreadable")},4954:(t,e,r)=>{"use strict";r(366)("iterator")},4452:(t,e,r)=>{"use strict";r(3674),r(3313),r(751),r(9721),r(5264)},751:(t,e,r)=>{"use strict";var n=r(1091),s=r(9724),o=r(5594),i=r(4640),a=r(5816),c=r(4411),u=a("symbol-to-string-registry");n({target:"Symbol",stat:!0,forced:!c},{keyFor:function(t){if(!o(t))throw new TypeError(i(t)+" is not a symbol");if(s(u,t))return u[t]}})},3377:(t,e,r)=>{"use strict";r(366)("matchAll")},4123:(t,e,r)=>{"use strict";r(366)("match")},2230:(t,e,r)=>{"use strict";r(366)("replace")},5344:(t,e,r)=>{"use strict";r(366)("search")},1660:(t,e,r)=>{"use strict";r(366)("species")},4610:(t,e,r)=>{"use strict";r(366)("split")},3669:(t,e,r)=>{"use strict";var n=r(366),s=r(3467);n("toPrimitive"),s()},4810:(t,e,r)=>{"use strict";var n=r(5582),s=r(366),o=r(4840);s("toStringTag"),o(n("Symbol"),"Symbol")},3325:(t,e,r)=>{"use strict";r(366)("unscopables")},768:(t,e,r)=>{"use strict";var n=r(6264),s=r(4284).f,o=n("metadata"),i=Function.prototype;void 0===i[o]&&s(i,o,{value:null})},8549:(t,e,r)=>{"use strict";r(5546)},1697:(t,e,r)=>{"use strict";r(366)("customMatcher")},7152:(t,e,r)=>{"use strict";r(2499)},3939:(t,e,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0},{isRegisteredSymbol:r(2595)})},3422:(t,e,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:r(2595)})},1785:(t,e,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:r(9197)})},36:(t,e,r)=>{"use strict";r(1091)({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:r(9197)})},8703:(t,e,r)=>{"use strict";r(366)("matcher")},6878:(t,e,r)=>{"use strict";r(366)("metadataKey")},1372:(t,e,r)=>{"use strict";r(366)("metadata")},4664:(t,e,r)=>{"use strict";r(366)("observable")},9671:(t,e,r)=>{"use strict";r(366)("patternMatch")},359:(t,e,r)=>{"use strict";r(366)("replaceAll")},3871:(t,e,r)=>{"use strict";var n=r(1091),s=r(5951),o=r(9472).clear;n({global:!0,bind:!0,enumerable:!0,forced:s.clearImmediate!==o},{clearImmediate:o})},237:()=>{},2560:(t,e,r)=>{"use strict";r(9363);var n=r(9287),s=r(5951),o=r(4840),i=r(3742);for(var a in n)o(s[a],a),i[a]=i.Array},4351:(t,e,r)=>{"use strict";r(3871),r(2910)},2910:(t,e,r)=>{"use strict";var n=r(1091),s=r(5951),o=r(9472).set,i=r(485),a=s.setImmediate?i(o,!1):o;n({global:!0,bind:!0,enumerable:!0,forced:s.setImmediate!==a},{setImmediate:a})},1978:(t,e,r)=>{"use strict";var n=r(1091),s=r(5951),o=r(485)(s.setInterval,!0);n({global:!0,bind:!0,forced:s.setInterval!==o},{setInterval:o})},6496:(t,e,r)=>{"use strict";var n=r(1091),s=r(5951),o=r(485)(s.setTimeout,!0);n({global:!0,bind:!0,forced:s.setTimeout!==o},{setTimeout:o})},3342:(t,e,r)=>{"use strict";r(1978),r(6496)},7105:(t,e,r)=>{"use strict";r(9363),r(1074);var n=r(1091),s=r(5951),o=r(2098),i=r(5582),a=r(3930),c=r(1907),u=r(9447),l=r(4791),h=r(8055),p=r(9251),d=r(2802),f=r(4840),g=r(7181),v=r(4932),m=r(9596),w=r(2250),y=r(9724),x=r(8311),_=r(3948),b=r(6624),S=r(6285),k=r(160),T=r(8075),A=r(5817),C=r(300),P=r(3448),O=r(9550),j=r(4787),R=r(6264),U=r(4321),L=R("iterator"),E="URLSearchParams",I=E+"Iterator",D=v.set,M=v.getterFor(E),F=v.getterFor(I),N=o("fetch"),B=o("Request"),W=o("Headers"),q=B&&B.prototype,V=W&&W.prototype,H=s.TypeError,z=s.encodeURIComponent,K=String.fromCharCode,G=i("String","fromCodePoint"),X=parseInt,J=c("".charAt),$=c([].join),Y=c([].push),Q=c("".replace),Z=c([].shift),tt=c([].splice),et=c("".split),rt=c("".slice),nt=c(/./.exec),st=/\+/g,ot=/^[0-9a-f]+$/i,it=function(t,e){var r=rt(t,e,e+2);return nt(ot,r)?X(r,16):NaN},at=function(t){for(var e=0,r=128;r>0&&0!==(t&r);r>>=1)e++;return e},ct=function(t){var e=null;switch(t.length){case 1:e=t[0];break;case 2:e=(31&t[0])<<6|63&t[1];break;case 3:e=(15&t[0])<<12|(63&t[1])<<6|63&t[2];break;case 4:e=(7&t[0])<<18|(63&t[1])<<12|(63&t[2])<<6|63&t[3]}return e>1114111?null:e},ut=function(t){for(var e=(t=Q(t,st," ")).length,r="",n=0;n<e;){var s=J(t,n);if("%"===s){if("%"===J(t,n+1)||n+3>e){r+="%",n++;continue}var o=it(t,n+1);if(o!=o){r+=s,n++;continue}n+=2;var i=at(o);if(0===i)s=K(o);else{if(1===i||i>4){r+="�",n++;continue}for(var a=[o],c=1;c<i&&!(++n+3>e||"%"!==J(t,n));){var u=it(t,n+1);if(u!=u){n+=3;break}if(u>191||u<128)break;Y(a,u),n+=2,c++}if(a.length!==i){r+="�";continue}var l=ct(a);null===l?r+="�":s=G(l)}}r+=s,n++}return r},lt=/[!'()~]|%20/g,ht={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},pt=function(t){return ht[t]},dt=function(t){return Q(z(t),lt,pt)},ft=g(function(t,e){D(this,{type:I,target:M(t).entries,index:0,kind:e})},E,function(){var t=F(this),e=t.target,r=t.index++;if(!e||r>=e.length)return t.target=null,O(void 0,!0);var n=e[r];switch(t.kind){case"keys":return O(n.key,!1);case"values":return O(n.value,!1)}return O([n.key,n.value],!1)},!0),gt=function(t){this.entries=[],this.url=null,void 0!==t&&(S(t)?this.parseObject(t):this.parseQuery("string"==typeof t?"?"===J(t,0)?rt(t,1):t:k(t)))};gt.prototype={type:E,bindURL:function(t){this.url=t,this.update()},parseObject:function(t){var e,r,n,s,o,i,c,u=this.entries,l=P(t);if(l)for(r=(e=C(t,l)).next;!(n=a(r,e)).done;){if(o=(s=C(b(n.value))).next,(i=a(o,s)).done||(c=a(o,s)).done||!a(o,s).done)throw new H("Expected sequence with length 2");Y(u,{key:k(i.value),value:k(c.value)})}else for(var h in t)y(t,h)&&Y(u,{key:h,value:k(t[h])})},parseQuery:function(t){if(t)for(var e,r,n=this.entries,s=et(t,"&"),o=0;o<s.length;)(e=s[o++]).length&&(r=et(e,"="),Y(n,{key:ut(Z(r)),value:ut($(r,"="))}))},serialize:function(){for(var t,e=this.entries,r=[],n=0;n<e.length;)t=e[n++],Y(r,dt(t.key)+"="+dt(t.value));return $(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var vt=function(){m(this,mt);var t=D(this,new gt(arguments.length>0?arguments[0]:void 0));u||(this.size=t.entries.length)},mt=vt.prototype;if(d(mt,{append:function(t,e){var r=M(this);j(arguments.length,2),Y(r.entries,{key:k(t),value:k(e)}),u||this.length++,r.updateURL()},delete:function(t){for(var e=M(this),r=j(arguments.length,1),n=e.entries,s=k(t),o=r<2?void 0:arguments[1],i=void 0===o?o:k(o),a=0;a<n.length;){var c=n[a];if(c.key!==s||void 0!==i&&c.value!==i)a++;else if(tt(n,a,1),void 0!==i)break}u||(this.size=n.length),e.updateURL()},get:function(t){var e=M(this).entries;j(arguments.length,1);for(var r=k(t),n=0;n<e.length;n++)if(e[n].key===r)return e[n].value;return null},getAll:function(t){var e=M(this).entries;j(arguments.length,1);for(var r=k(t),n=[],s=0;s<e.length;s++)e[s].key===r&&Y(n,e[s].value);return n},has:function(t){for(var e=M(this).entries,r=j(arguments.length,1),n=k(t),s=r<2?void 0:arguments[1],o=void 0===s?s:k(s),i=0;i<e.length;){var a=e[i++];if(a.key===n&&(void 0===o||a.value===o))return!0}return!1},set:function(t,e){var r=M(this);j(arguments.length,1);for(var n,s=r.entries,o=!1,i=k(t),a=k(e),c=0;c<s.length;c++)(n=s[c]).key===i&&(o?tt(s,c--,1):(o=!0,n.value=a));o||Y(s,{key:i,value:a}),u||(this.size=s.length),r.updateURL()},sort:function(){var t=M(this);U(t.entries,function(t,e){return t.key>e.key?1:-1}),t.updateURL()},forEach:function(t){for(var e,r=M(this).entries,n=x(t,arguments.length>1?arguments[1]:void 0),s=0;s<r.length;)n((e=r[s++]).value,e.key,this)},keys:function(){return new ft(this,"keys")},values:function(){return new ft(this,"values")},entries:function(){return new ft(this,"entries")}},{enumerable:!0}),h(mt,L,mt.entries,{name:"entries"}),h(mt,"toString",function(){return M(this).serialize()},{enumerable:!0}),u&&p(mt,"size",{get:function(){return M(this).entries.length},configurable:!0,enumerable:!0}),f(vt,E),n({global:!0,constructor:!0,forced:!l},{URLSearchParams:vt}),!l&&w(W)){var wt=c(V.has),yt=c(V.set),xt=function(t){if(S(t)){var e,r=t.body;if(_(r)===E)return e=t.headers?new W(t.headers):new W,wt(e,"content-type")||yt(e,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),T(t,{body:A(0,k(r)),headers:A(0,e)})}return t};if(w(N)&&n({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return N(t,arguments.length>1?xt(arguments[1]):{})}}),w(B)){var _t=function(t){return m(this,q),new B(t,arguments.length>1?xt(arguments[1]):{})};q.constructor=_t,_t.prototype=q,n({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:_t})}}t.exports={URLSearchParams:vt,getState:M}},5042:()=>{},7649:()=>{},6299:(t,e,r)=>{"use strict";r(7105)},3604:()=>{},8669:(t,e,r)=>{"use strict";var n=r(1091),s=r(5582),o=r(8828),i=r(4787),a=r(160),c=r(4791),u=s("URL"),l=c&&o(function(){u.canParse()}),h=o(function(){return 1!==u.canParse.length});n({target:"URL",stat:!0,forced:!l||h},{canParse:function(t){var e=i(arguments.length,1),r=a(t),n=e<2||void 0===arguments[1]?void 0:a(arguments[1]);try{return!!new u(r,n)}catch(t){return!1}}})},6909:(t,e,r)=>{"use strict";r(7057);var n,s=r(1091),o=r(9447),i=r(4791),a=r(5951),c=r(8311),u=r(1907),l=r(8055),h=r(9251),p=r(9596),d=r(9724),f=r(9538),g=r(1229),v=r(3427),m=r(1470).codeAt,w=r(9156),y=r(160),x=r(4840),_=r(4787),b=r(7105),S=r(4932),k=S.set,T=S.getterFor("URL"),A=b.URLSearchParams,C=b.getState,P=a.URL,O=a.TypeError,j=a.parseInt,R=Math.floor,U=Math.pow,L=u("".charAt),E=u(/./.exec),I=u([].join),D=u(1.1.toString),M=u([].pop),F=u([].push),N=u("".replace),B=u([].shift),W=u("".split),q=u("".slice),V=u("".toLowerCase),H=u([].unshift),z="Invalid scheme",K="Invalid host",G="Invalid port",X=/[a-z]/i,J=/[\d+-.a-z]/i,$=/\d/,Y=/^0x/i,Q=/^[0-7]+$/,Z=/^\d+$/,tt=/^[\da-f]+$/i,et=/[\0\t\n\r #%/:<>?@[\\\]^|]/,rt=/[\0\t\n\r #/:<>?@[\\\]^|]/,nt=/^[\u0000-\u0020]+/,st=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,ot=/[\t\n\r]/g,it=function(t){var e,r,n,s;if("number"==typeof t){for(e=[],r=0;r<4;r++)H(e,t%256),t=R(t/256);return I(e,".")}if("object"==typeof t){for(e="",n=function(t){for(var e=null,r=1,n=null,s=0,o=0;o<8;o++)0!==t[o]?(s>r&&(e=n,r=s),n=null,s=0):(null===n&&(n=o),++s);return s>r?n:e}(t),r=0;r<8;r++)s&&0===t[r]||(s&&(s=!1),n===r?(e+=r?":":"::",s=!0):(e+=D(t[r],16),r<7&&(e+=":")));return"["+e+"]"}return t},at={},ct=f({},at,{" ":1,'"':1,"<":1,">":1,"`":1}),ut=f({},ct,{"#":1,"?":1,"{":1,"}":1}),lt=f({},ut,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ht=function(t,e){var r=m(t,0);return r>32&&r<127&&!d(e,t)?t:encodeURIComponent(t)},pt={ftp:21,file:null,http:80,https:443,ws:80,wss:443},dt=function(t,e){var r;return 2===t.length&&E(X,L(t,0))&&(":"===(r=L(t,1))||!e&&"|"===r)},ft=function(t){var e;return t.length>1&&dt(q(t,0,2))&&(2===t.length||"/"===(e=L(t,2))||"\\"===e||"?"===e||"#"===e)},gt=function(t){return"."===t||"%2e"===V(t)},vt=function(t){return".."===(t=V(t))||"%2e."===t||".%2e"===t||"%2e%2e"===t},mt={},wt={},yt={},xt={},_t={},bt={},St={},kt={},Tt={},At={},Ct={},Pt={},Ot={},jt={},Rt={},Ut={},Lt={},Et={},It={},Dt={},Mt={},Ft=function(t,e,r){var n,s,o,i=y(t);if(e){if(s=this.parse(i))throw new O(s);this.searchParams=null}else{if(void 0!==r&&(n=new Ft(r,!0)),s=this.parse(i,null,n))throw new O(s);(o=C(new A)).bindURL(this),this.searchParams=o}};Ft.prototype={type:"URL",parse:function(t,e,r){var s,o,i,a,c=this,u=e||mt,l=0,h="",p=!1,f=!1,m=!1;for(t=y(t),e||(c.scheme="",c.username="",c.password="",c.host=null,c.port=null,c.path=[],c.query=null,c.fragment=null,c.cannotBeABaseURL=!1,t=N(t,nt,""),t=N(t,st,"$1")),t=N(t,ot,""),s=g(t);l<=s.length;){switch(o=s[l],u){case mt:if(!o||!E(X,o)){if(e)return z;u=yt;continue}h+=V(o),u=wt;break;case wt:if(o&&(E(J,o)||"+"===o||"-"===o||"."===o))h+=V(o);else{if(":"!==o){if(e)return z;h="",u=yt,l=0;continue}if(e&&(c.isSpecial()!==d(pt,h)||"file"===h&&(c.includesCredentials()||null!==c.port)||"file"===c.scheme&&!c.host))return;if(c.scheme=h,e)return void(c.isSpecial()&&pt[c.scheme]===c.port&&(c.port=null));h="","file"===c.scheme?u=jt:c.isSpecial()&&r&&r.scheme===c.scheme?u=xt:c.isSpecial()?u=kt:"/"===s[l+1]?(u=_t,l++):(c.cannotBeABaseURL=!0,F(c.path,""),u=It)}break;case yt:if(!r||r.cannotBeABaseURL&&"#"!==o)return z;if(r.cannotBeABaseURL&&"#"===o){c.scheme=r.scheme,c.path=v(r.path),c.query=r.query,c.fragment="",c.cannotBeABaseURL=!0,u=Mt;break}u="file"===r.scheme?jt:bt;continue;case xt:if("/"!==o||"/"!==s[l+1]){u=bt;continue}u=Tt,l++;break;case _t:if("/"===o){u=At;break}u=Et;continue;case bt:if(c.scheme=r.scheme,o===n)c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=v(r.path),c.query=r.query;else if("/"===o||"\\"===o&&c.isSpecial())u=St;else if("?"===o)c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=v(r.path),c.query="",u=Dt;else{if("#"!==o){c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=v(r.path),c.path.length--,u=Et;continue}c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,c.path=v(r.path),c.query=r.query,c.fragment="",u=Mt}break;case St:if(!c.isSpecial()||"/"!==o&&"\\"!==o){if("/"!==o){c.username=r.username,c.password=r.password,c.host=r.host,c.port=r.port,u=Et;continue}u=At}else u=Tt;break;case kt:if(u=Tt,"/"!==o||"/"!==L(h,l+1))continue;l++;break;case Tt:if("/"!==o&&"\\"!==o){u=At;continue}break;case At:if("@"===o){p&&(h="%40"+h),p=!0,i=g(h);for(var w=0;w<i.length;w++){var x=i[w];if(":"!==x||m){var _=ht(x,lt);m?c.password+=_:c.username+=_}else m=!0}h=""}else if(o===n||"/"===o||"?"===o||"#"===o||"\\"===o&&c.isSpecial()){if(p&&""===h)return"Invalid authority";l-=g(h).length+1,h="",u=Ct}else h+=o;break;case Ct:case Pt:if(e&&"file"===c.scheme){u=Ut;continue}if(":"!==o||f){if(o===n||"/"===o||"?"===o||"#"===o||"\\"===o&&c.isSpecial()){if(c.isSpecial()&&""===h)return K;if(e&&""===h&&(c.includesCredentials()||null!==c.port))return;if(a=c.parseHost(h))return a;if(h="",u=Lt,e)return;continue}"["===o?f=!0:"]"===o&&(f=!1),h+=o}else{if(""===h)return K;if(a=c.parseHost(h))return a;if(h="",u=Ot,e===Pt)return}break;case Ot:if(!E($,o)){if(o===n||"/"===o||"?"===o||"#"===o||"\\"===o&&c.isSpecial()||e){if(""!==h){var b=j(h,10);if(b>65535)return G;c.port=c.isSpecial()&&b===pt[c.scheme]?null:b,h=""}if(e)return;u=Lt;continue}return G}h+=o;break;case jt:if(c.scheme="file","/"===o||"\\"===o)u=Rt;else{if(!r||"file"!==r.scheme){u=Et;continue}switch(o){case n:c.host=r.host,c.path=v(r.path),c.query=r.query;break;case"?":c.host=r.host,c.path=v(r.path),c.query="",u=Dt;break;case"#":c.host=r.host,c.path=v(r.path),c.query=r.query,c.fragment="",u=Mt;break;default:ft(I(v(s,l),""))||(c.host=r.host,c.path=v(r.path),c.shortenPath()),u=Et;continue}}break;case Rt:if("/"===o||"\\"===o){u=Ut;break}r&&"file"===r.scheme&&!ft(I(v(s,l),""))&&(dt(r.path[0],!0)?F(c.path,r.path[0]):c.host=r.host),u=Et;continue;case Ut:if(o===n||"/"===o||"\\"===o||"?"===o||"#"===o){if(!e&&dt(h))u=Et;else if(""===h){if(c.host="",e)return;u=Lt}else{if(a=c.parseHost(h))return a;if("localhost"===c.host&&(c.host=""),e)return;h="",u=Lt}continue}h+=o;break;case Lt:if(c.isSpecial()){if(u=Et,"/"!==o&&"\\"!==o)continue}else if(e||"?"!==o)if(e||"#"!==o){if(o!==n&&(u=Et,"/"!==o))continue}else c.fragment="",u=Mt;else c.query="",u=Dt;break;case Et:if(o===n||"/"===o||"\\"===o&&c.isSpecial()||!e&&("?"===o||"#"===o)){if(vt(h)?(c.shortenPath(),"/"===o||"\\"===o&&c.isSpecial()||F(c.path,"")):gt(h)?"/"===o||"\\"===o&&c.isSpecial()||F(c.path,""):("file"===c.scheme&&!c.path.length&&dt(h)&&(c.host&&(c.host=""),h=L(h,0)+":"),F(c.path,h)),h="","file"===c.scheme&&(o===n||"?"===o||"#"===o))for(;c.path.length>1&&""===c.path[0];)B(c.path);"?"===o?(c.query="",u=Dt):"#"===o&&(c.fragment="",u=Mt)}else h+=ht(o,ut);break;case It:"?"===o?(c.query="",u=Dt):"#"===o?(c.fragment="",u=Mt):o!==n&&(c.path[0]+=ht(o,at));break;case Dt:e||"#"!==o?o!==n&&("'"===o&&c.isSpecial()?c.query+="%27":c.query+="#"===o?"%23":ht(o,at)):(c.fragment="",u=Mt);break;case Mt:o!==n&&(c.fragment+=ht(o,ct))}l++}},parseHost:function(t){var e,r,n;if("["===L(t,0)){if("]"!==L(t,t.length-1))return K;if(e=function(t){var e,r,n,s,o,i,a,c=[0,0,0,0,0,0,0,0],u=0,l=null,h=0,p=function(){return L(t,h)};if(":"===p()){if(":"!==L(t,1))return;h+=2,l=++u}for(;p();){if(8===u)return;if(":"!==p()){for(e=r=0;r<4&&E(tt,p());)e=16*e+j(p(),16),h++,r++;if("."===p()){if(0===r)return;if(h-=r,u>6)return;for(n=0;p();){if(s=null,n>0){if(!("."===p()&&n<4))return;h++}if(!E($,p()))return;for(;E($,p());){if(o=j(p(),10),null===s)s=o;else{if(0===s)return;s=10*s+o}if(s>255)return;h++}c[u]=256*c[u]+s,2!==++n&&4!==n||u++}if(4!==n)return;break}if(":"===p()){if(h++,!p())return}else if(p())return;c[u++]=e}else{if(null!==l)return;h++,l=++u}}if(null!==l)for(i=u-l,u=7;0!==u&&i>0;)a=c[u],c[u--]=c[l+i-1],c[l+--i]=a;else if(8!==u)return;return c}(q(t,1,-1)),!e)return K;this.host=e}else if(this.isSpecial()){if(t=w(t),E(et,t))return K;if(e=function(t){var e,r,n,s,o,i,a,c=W(t,".");if(c.length&&""===c[c.length-1]&&c.length--,(e=c.length)>4)return t;for(r=[],n=0;n<e;n++){if(""===(s=c[n]))return t;if(o=10,s.length>1&&"0"===L(s,0)&&(o=E(Y,s)?16:8,s=q(s,8===o?1:2)),""===s)i=0;else{if(!E(10===o?Z:8===o?Q:tt,s))return t;i=j(s,o)}F(r,i)}for(n=0;n<e;n++)if(i=r[n],n===e-1){if(i>=U(256,5-e))return null}else if(i>255)return null;for(a=M(r),n=0;n<r.length;n++)a+=r[n]*U(256,3-n);return a}(t),null===e)return K;this.host=e}else{if(E(rt,t))return K;for(e="",r=g(t),n=0;n<r.length;n++)e+=ht(r[n],at);this.host=e}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return d(pt,this.scheme)},shortenPath:function(){var t=this.path,e=t.length;!e||"file"===this.scheme&&1===e&&dt(t[0],!0)||t.length--},serialize:function(){var t=this,e=t.scheme,r=t.username,n=t.password,s=t.host,o=t.port,i=t.path,a=t.query,c=t.fragment,u=e+":";return null!==s?(u+="//",t.includesCredentials()&&(u+=r+(n?":"+n:"")+"@"),u+=it(s),null!==o&&(u+=":"+o)):"file"===e&&(u+="//"),u+=t.cannotBeABaseURL?i[0]:i.length?"/"+I(i,"/"):"",null!==a&&(u+="?"+a),null!==c&&(u+="#"+c),u},setHref:function(t){var e=this.parse(t);if(e)throw new O(e);this.searchParams.update()},getOrigin:function(){var t=this.scheme,e=this.port;if("blob"===t)try{return new Nt(t.path[0]).origin}catch(t){return"null"}return"file"!==t&&this.isSpecial()?t+"://"+it(this.host)+(null!==e?":"+e:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(t){this.parse(y(t)+":",mt)},getUsername:function(){return this.username},setUsername:function(t){var e=g(y(t));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<e.length;r++)this.username+=ht(e[r],lt)}},getPassword:function(){return this.password},setPassword:function(t){var e=g(y(t));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<e.length;r++)this.password+=ht(e[r],lt)}},getHost:function(){var t=this.host,e=this.port;return null===t?"":null===e?it(t):it(t)+":"+e},setHost:function(t){this.cannotBeABaseURL||this.parse(t,Ct)},getHostname:function(){var t=this.host;return null===t?"":it(t)},setHostname:function(t){this.cannotBeABaseURL||this.parse(t,Pt)},getPort:function(){var t=this.port;return null===t?"":y(t)},setPort:function(t){this.cannotHaveUsernamePasswordPort()||(""===(t=y(t))?this.port=null:this.parse(t,Ot))},getPathname:function(){var t=this.path;return this.cannotBeABaseURL?t[0]:t.length?"/"+I(t,"/"):""},setPathname:function(t){this.cannotBeABaseURL||(this.path=[],this.parse(t,Lt))},getSearch:function(){var t=this.query;return t?"?"+t:""},setSearch:function(t){""===(t=y(t))?this.query=null:("?"===L(t,0)&&(t=q(t,1)),this.query="",this.parse(t,Dt)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var t=this.fragment;return t?"#"+t:""},setHash:function(t){""!==(t=y(t))?("#"===L(t,0)&&(t=q(t,1)),this.fragment="",this.parse(t,Mt)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Nt=function(t){var e=p(this,Bt),r=_(arguments.length,1)>1?arguments[1]:void 0,n=k(e,new Ft(t,!1,r));o||(e.href=n.serialize(),e.origin=n.getOrigin(),e.protocol=n.getProtocol(),e.username=n.getUsername(),e.password=n.getPassword(),e.host=n.getHost(),e.hostname=n.getHostname(),e.port=n.getPort(),e.pathname=n.getPathname(),e.search=n.getSearch(),e.searchParams=n.getSearchParams(),e.hash=n.getHash())},Bt=Nt.prototype,Wt=function(t,e){return{get:function(){return T(this)[t]()},set:e&&function(t){return T(this)[e](t)},configurable:!0,enumerable:!0}};if(o&&(h(Bt,"href",Wt("serialize","setHref")),h(Bt,"origin",Wt("getOrigin")),h(Bt,"protocol",Wt("getProtocol","setProtocol")),h(Bt,"username",Wt("getUsername","setUsername")),h(Bt,"password",Wt("getPassword","setPassword")),h(Bt,"host",Wt("getHost","setHost")),h(Bt,"hostname",Wt("getHostname","setHostname")),h(Bt,"port",Wt("getPort","setPort")),h(Bt,"pathname",Wt("getPathname","setPathname")),h(Bt,"search",Wt("getSearch","setSearch")),h(Bt,"searchParams",Wt("getSearchParams")),h(Bt,"hash",Wt("getHash","setHash"))),l(Bt,"toJSON",function(){return T(this).serialize()},{enumerable:!0}),l(Bt,"toString",function(){return T(this).serialize()},{enumerable:!0}),P){var qt=P.createObjectURL,Vt=P.revokeObjectURL;qt&&l(Nt,"createObjectURL",c(qt,P)),Vt&&l(Nt,"revokeObjectURL",c(Vt,P))}x(Nt,"URL"),s({global:!0,constructor:!0,forced:!i,sham:!o},{URL:Nt})},3487:(t,e,r)=>{"use strict";r(6909)},8670:(t,e,r)=>{"use strict";var n=r(1091),s=r(5582),o=r(4787),i=r(160),a=r(4791),c=s("URL");n({target:"URL",stat:!0,forced:!a},{parse:function(t){var e=o(arguments.length,1),r=i(t),n=e<2||void 0===arguments[1]?void 0:i(arguments[1]);try{return new c(r,n)}catch(t){return null}}})},4783:()=>{},8402:(t,e,r)=>{"use strict";var n=r(3531);t.exports=n},1969:(t,e,r)=>{"use strict";var n=r(2092);t.exports=n},1374:(t,e,r)=>{"use strict";var n=r(6535);t.exports=n},7867:(t,e,r)=>{"use strict";var n=r(5354);t.exports=n},2616:(t,e,r)=>{"use strict";var n=r(3155);t.exports=n},9617:(t,e,r)=>{"use strict";var n=r(3246);t.exports=n},4525:(t,e,r)=>{"use strict";var n=r(3948),s=r(9724),o=r(8280),i=r(1969);r(237);var a=Array.prototype,c={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.forEach;return t===a||o(a,t)&&e===a.forEach||s(c,n(t))?i:e}},6343:(t,e,r)=>{"use strict";var n=r(6880);t.exports=n},7852:(t,e,r)=>{"use strict";var n=r(4507);t.exports=n},1618:(t,e,r)=>{"use strict";r(2560);var n=r(3948),s=r(9724),o=r(8280),i=r(1374),a=Array.prototype,c={DOMTokenList:!0,NodeList:!0};t.exports=function(t){var e=t.keys;return t===a||o(a,t)&&e===a.keys||s(c,n(t))?i:e}},9528:(t,e,r)=>{"use strict";var n=r(8823);t.exports=n},2990:(t,e,r)=>{"use strict";var n=r(9685);t.exports=n},1086:(t,e,r)=>{"use strict";var n=r(2757);t.exports=n},2268:(t,e,r)=>{"use strict";var n=r(7961);t.exports=n},4598:(t,e,r)=>{"use strict";var n=r(3423);t.exports=n},6660:(t,e,r)=>{"use strict";var n=r(317);t.exports=n},975:(t,e,r)=>{"use strict";var n=r(7367);t.exports=n},9703:(t,e,r)=>{"use strict";var n=r(8970);t.exports=n},8251:(t,e,r)=>{"use strict";var n=r(1926);t.exports=n},6513:(t,e,r)=>{"use strict";var n=r(5092);t.exports=n},3220:(t,e,r)=>{"use strict";var n=r(9147);t.exports=n},9563:(t,e,r)=>{"use strict";var n=r(4776);t.exports=n},6490:(t,e,r)=>{"use strict";var n=r(9661);t.exports=n},5204:(t,e,r)=>{"use strict";var n=r(7027);r(2560),t.exports=n},9270:(t,e,r)=>{"use strict";r(4351);var n=r(2046);t.exports=n.setImmediate},568:(t,e,r)=>{"use strict";r(3342);var n=r(2046);t.exports=n.setTimeout},4139:(t,e,r)=>{"use strict";var n=r(3842);r(2560),t.exports=n},7045:(t,e,r)=>{"use strict";var n=r(1730);r(2560),t.exports=n},70:(t,e,r)=>{"use strict";var n=r(1661);t.exports=n},8348:(t,e,r)=>{"use strict";var n=r(9076);r(2560),t.exports=n},9792:(t,e,r)=>{"use strict";var n=r(6908);t.exports=n},9076:(t,e,r)=>{"use strict";r(6299),r(5042),r(7649),r(3604);var n=r(2046);t.exports=n.URLSearchParams},6908:(t,e,r)=>{"use strict";r(9076),r(3487),r(8669),r(8670),r(4783);var n=r(2046);t.exports=n.URL}},h={};function p(t){var e=h[t];if(void 0!==e)return e.exports;var r=h[t]={exports:{}};return l[t].call(r.exports,r,r.exports,p),r.exports}p.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return p.d(e,{a:e}),e},p.d=(t,e)=>{for(var r in e)p.o(e,r)&&!p.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},p.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),p.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var d={};return(()=>{"use strict";p.r(d),p.d(d,{default:()=>Ae});var t=p(533),e=p.n(t),r=p(8628),n=p.n(r),s=p(5569),o=p.n(s),i=p(697),a=p.n(i),c=p(6100),u=p.n(c),l=p(6319),h=p.n(l),f=p(8928),g=p.n(f),v=p(6226),m=p.n(v),w=p(6751),y=p.n(w),x=p(5110),_=p.n(x),b=p(1549),S=p.n(b);const k=require("electron");var T=p(9440),A=p.n(T),C=p(1662),P=p.n(C),O=p(6763),j=p.n(O),R=p(9544),U=p.n(R),L=p(1721),E=p.n(L);const I=require("node:path");var D=p.n(I);function M(t,e){var r=a()(t);if(u()){var n=u()(t);e&&(n=h()(n).call(n,function(e){return g()(t,e).enumerable})),r.push.apply(r,n)}return r}function F(t){for(var r=1;r<arguments.length;r++){var n,s,o=null!=arguments[r]?arguments[r]:{};r%2?m()(n=M(Object(o),!0)).call(n,function(r){e()(t,r,o[r])}):y()?_()(t,y()(o)):m()(s=M(Object(o))).call(s,function(e){S()(t,e,g()(o,e))})}return t}const N=(t,e)=>{const r="window-state",n=`window-state-v2-${t}`,s=new(P())({name:n}),o={width:e.width,height:e.height};let i={};i=(t=>{var e;const r=E()(e=k.screen.getAllDisplays()).call(e,e=>((t,e)=>t.x>=e.x&&t.y>=e.y&&t.x+t.width<=e.x+e.width&&t.y+t.height<=e.y+e.height)(t,e.bounds));return r?t:(()=>{const t=k.screen.getPrimaryDisplay().bounds;return U()({},o,{x:(t.width-o.width)/2,y:(t.height-o.height)/2})})()})(s.get(r,o));const a=F(F(F({},e),i),{},{webPreferences:F({nodeIntegration:!1,contextIsolation:!0,enableBlinkFeatures:"",sandbox:!1,preload:D().join(__dirname,"preload.js")},e.webPreferences),autoHideMenuBar:!0}),c=new k.BrowserWindow(a);return c.on("close",()=>{c.isMinimized()||c.isMaximized()||U()(i,(()=>{c.removeMenu();const t=c.getPosition(),e=c.getSize();return{x:t[0],y:t[1],width:e[0],height:e[1]}})()),s.set(r,i)}),c};var B=p(1240),W=p.n(B),q=p(6255),V=p.n(q),H=p(129),z=p.n(H),K=p(165),G=p.n(K);const X=require("https");var J=p.n(X),$=p(5876),Y=p(2742),Q=p.n(Y);const Z={locale:"en",fullscreen:!1,resolution:720,xhome_bitrate_mode:"Auto",xhome_bitrate:20,xcloud_bitrate_mode:"Auto",xcloud_bitrate:20,audio_bitrate_mode:"Auto",audio_bitrate:20,enable_audio_control:!1,preferred_game_language:"en-US",force_region_ip:"",codec:"",polling_rate:250,vibration:!0,vibration_mode:"Native",gamepad_kernal:"Native",gamepad_mix:!1,gamepad_index:-1,dead_zone:.1,edge_compensation:0,force_trigger_rumble:"",power_on:!1,video_format:"",virtual_gamepad_opacity:.6,gamepad_maping:null,native_gamepad_maping:null,ipv6:!1,enable_native_mouse_keyboard:!1,mouse_sensitive:.5,performance_style:!1,server_url:"",server_username:"",server_credential:"",background_keepalive:!1,input_mousekeyboard_maping:{ArrowLeft:"DPadLeft",ArrowUp:"DPadUp",ArrowRight:"DPadRight",ArrowDown:"DPadDown",Enter:"A",k:"A",Backspace:"B",l:"B",j:"X",i:"Y",2:"LeftShoulder",3:"RightShoulder",1:"LeftTrigger",4:"RightTrigger",5:"LeftThumb",6:"RightThumb",a:"LeftThumbXAxisPlus",d:"LeftThumbXAxisMinus",w:"LeftThumbYAxisPlus",s:"LeftThumbYAxisMinus",f:"RightThumbXAxisPlus",h:"RightThumbXAxisMinus",t:"RightThumbYAxisPlus",g:"RightThumbYAxisMinus",v:"View",m:"Menu",n:"Nexus"},display_options:{sharpness:5,saturation:100,contrast:100,brightness:100},use_vulkan:!1,fsr:!1,fsr_sharpness:2,debug:!1};class tt{constructor(t,r,n,s="home"){e()(this,"_application",void 0),e()(this,"_host",void 0),e()(this,"_token",void 0),e()(this,"_type",void 0),e()(this,"_sessionPath",void 0),e()(this,"_exchangeCounter",0),e()(this,"_exchangeUrl",""),e()(this,"_currentGame",""),this._application=t,this._host=r,this._token=n,this._type=s}get(t,e="GET"){return new(W())((r,n)=>{let s="";const o=J().request({host:this._host,path:t,method:e,headers:{"Content-Type":"application/json",Authorization:"Bearer "+this._token}},o=>{o.on("data",t=>{s+=t}),o.on("end",()=>{if(o.statusCode>=200&&o.statusCode<=299){this._application.log("xCloudApi","host:"+this._host+" get("+t+", "+e+") resolve:",o.statusCode);let i=s;try{i=JSON.parse(s)}catch(t){}204===o.statusCode?V()(()=>{this.get(t,e).then(t=>{r(t)}).catch(t=>{n(t)})},750):r(i)}else this._application.log("xCloudApi","get("+t+") reject:",o.statusCode),n({url:t,status:o.statusCode,body:s})})});o.on("error",t=>{n(t)}),o.end()})}post(t,e={},r={}){return new(W())((n,s)=>{let i="";const a=U()({},{"Content-Type":"application/json",Authorization:"Bearer "+this._token},r),c=J().request({host:this._host,path:t,method:"POST",headers:a},e=>{e.on("data",t=>{i+=t}),e.on("end",()=>{if(e.statusCode>=200&&e.statusCode<=299){this._application.log("xCloudApi","post("+t+") resolve:",e.statusCode,i);let r=i;try{r=JSON.parse(i)}catch(t){}n(r)}else this._application.log("xCloudApi","post("+t+") reject:",e.statusCode),s({url:t,status:e.statusCode,body:i})})});c.on("error",t=>{s(t)}),c.write(o()(e)),c.end()})}getWaitingTimes(t){return this.get("/v1/waittime/"+t)}getTitles(){return this.get("/v2/titles")}getRecentTitles(){return this.get("/v2/titles/mru?mr=25")}stopStream(t){return this.get("/v5/sessions/"+this._type+"/"+t,"DELETE")}startStream(t){const e=this._application._store.get("settings",Z);let r="android";1080==e.resolution?r="windows":1081===e.resolution&&(r="tizen");const n=o()({appInfo:{env:{clientAppId:"www.xbox.com",clientAppType:"browser",clientAppVersion:"26.1.97",clientSdkVersion:"10.3.7",httpEnvironment:"prod",sdkInstallId:""}},dev:{hw:{make:"Microsoft",model:"unknown",sdktype:"web"},os:{name:r,ver:"22631.2715",platform:"desktop"},displayInfo:{dimensions:{widthInPixels:1920,heightInPixels:1080},pixelDensity:{dpiX:1,dpiY:1}},browser:{browserName:"chrome",browserVersion:"130.0"}}}),s={titleId:"cloud"===this._type?t:"",systemUpdateGroup:"",clientSessionId:"",settings:{nanoVersion:"V3;WebrtcTransport.dll",enableTextToSpeech:!1,highContrast:0,locale:e.preferred_game_language?e.preferred_game_language:"en-US",useIceConnection:!1,timezoneOffsetMinutes:120,sdkType:"web",osName:r},serverId:"home"===this._type?t:"",fallbackRegionNames:[]};return this.post("/v5/sessions/"+this._type+"/play",s,{"X-MS-Device-Info":n})}getStreamState(t){return this.get("/v5/sessions/"+this._type+"/"+t+"/state")}sendSdp(t,e){return new(W())((r,n)=>{const s={messageType:"offer",sdp:e,configuration:{chatConfiguration:{bytesPerSample:2,expectedClipDurationMs:20,format:{codec:"opus",container:"webm"},numChannels:1,sampleFrequencyHz:24e3},chat:{minVersion:1,maxVersion:1},control:{minVersion:1,maxVersion:3},input:{minVersion:1,maxVersion:8},message:{minVersion:1,maxVersion:1}}};this.post("/v5/sessions/"+this._type+"/"+t+"/sdp",s).then(()=>{this.get("/v5/sessions/"+this._type+"/"+t+"/sdp").then(t=>{const e=JSON.parse(t.exchangeResponse);r(e)}).catch(t=>{n(t)})}).catch(t=>{n(t)})})}sendChatSdp(t,e){return new(W())((r,n)=>{const s={messageType:"offer",sdp:e,configuration:{isMediaStreamsChatRenegotiation:!0}};this.post("/v5/sessions/"+this._type+"/"+t+"/sdp",s).then(()=>{this.get("/v5/sessions/"+this._type+"/"+t+"/sdp").then(t=>{const e=JSON.parse(t.exchangeResponse);r(e)}).catch(t=>{n(t)})}).catch(t=>{n(t)})})}checkIce(t){const e=this._application._store.get("settings",Z);return new(W())((r,s)=>{this.get("/v5/sessions/"+this._type+"/"+t+"/ice").then(o=>{if(""===o)V()(()=>{this.checkIce(t).then(t=>{r(t)}).catch(t=>{s(t)})},1e3);else{const t=o,s=JSON.parse(t.exchangeResponse),i=[];for(const t in s){const e=s[t].candidate.split(" ");if(e.length>4&&"2001"===e[4].substr(0,4)){const t=new $.Address6(e[4]).inspectTeredo();i.push({candidate:"a=candidate:10 1 UDP 1 "+t.client4+" 9002 typ host ",messageType:"iceCandidate",sdpMLineIndex:"0",sdpMid:"0"}),i.push({candidate:"a=candidate:11 1 UDP 1 "+t.client4+" "+t.udpPort+" typ host ",messageType:"iceCandidate",sdpMLineIndex:"0",sdpMid:"0"})}i.push(s[t])}const a=new RegExp(/^(?:a=)?candidate:(?<foundation>\d+) (?<component>\d+) (?<protocol>\w+) (?<priority>\d+) (?<ip>[^\s]+) (?<port>\d+) (?<the_rest>.*)/),c=[];for(const t of i){if("a=end-of-candidates"===t.candidate)continue;const e=a.exec(t.candidate).groups;c.push(e)}e.ipv6&&z()(c).call(c,(t,e)=>{const r=t.ip,s=e.ip;return!n()(r).call(r,":")&&n()(s).call(s,":")?1:-1});const u=[];let l=1;const h=t=>({candidate:t,messageType:"iceCandidate",sdpMLineIndex:"0",sdpMid:"0"});m()(c).call(c,t=>{t.foundation=l,t.priority=1===l?2130706431:1,u.push(h(`a=candidate:${t.foundation} 1 UDP ${t.priority} ${t.ip} ${t.port} ${t.the_rest}`)),++l}),u.push(h("a=end-of-candidates")),r(u)}})})}sendIce(t,e){return new(W())((r,n)=>{const s={messageType:"iceCandidate",candidate:e};this.post("/v5/sessions/"+this._type+"/"+t+"/ice",s).then(()=>{this.checkIce(t).then(t=>{r(t)}).catch(t=>{n(t)})}).catch(t=>{n(t)})})}sendMSALAuth(t,e){return this.post("/v5/sessions/"+this._type+"/"+t+"/connect",{userToken:e})}sendKeepalive(t){return this.post("/v5/sessions/"+this._type+"/"+t+"/keepalive")}getActiveSessions(){return this.get("/v5/sessions/"+this._type+"/active")}getConsoles(){return new(W())(t=>{var e;const r=o()({appInfo:{env:{clientAppId:"www.xbox.com",clientAppType:"browser",clientAppVersion:"26.1.97",clientSdkVersion:"10.3.7",httpEnvironment:"prod",sdkInstallId:""}},dev:{hw:{make:"Microsoft",model:"unknown",sdktype:"web"},os:{name:"windows",ver:"22631.2715",platform:"desktop"},displayInfo:{dimensions:{widthInPixels:1920,heightInPixels:1080},pixelDensity:{dpiX:1,dpiY:1}},browser:{browserName:"chrome",browserVersion:"130.0"}}}),n=G()(e=this._host).call(e,"http")?this._host:"https://"+this._host;Q().get(`${n}/v6/servers/home?mr=50`,{headers:{"Content-Type":"application/json","X-MS-Device-Info":r,Authorization:"Bearer "+this._token},timeout:15e3}).then(e=>{console.log("[xcloudapi.ts] getConsoles res:",e.data),e.data&&e.data.results?t(e.data.results):t([])}).catch(e=>{console.log("get consoles error:",e),t([])})})}inputConfigs(t){console.log("xboxTitleId:",t);const e=this._application._store.get("settings",Z);let r="android";1080==e.resolution?r="windows":1081===e.resolution&&(r="tizen");const n=o()({appInfo:{env:{clientAppId:"www.xbox.com",clientAppType:"browser",clientAppVersion:"26.1.97",clientSdkVersion:"10.3.7",httpEnvironment:"prod",sdkInstallId:""}},dev:{hw:{make:"Microsoft",model:"unknown",sdktype:"web"},os:{name:r,ver:"22631.2715",platform:"desktop"},displayInfo:{dimensions:{widthInPixels:1920,heightInPixels:1080},pixelDensity:{dpiX:1,dpiY:1}},browser:{browserName:"chrome",browserVersion:"130.0"}}}),s={titleIds:[t],titleIdType:"xboxTitleId"};return this.post("/v2/titles/inputconfigs",s,{"X-MS-Device-Info":n})}}class et{constructor(t){e()(this,"_application",void 0),e()(this,"_friends",{}),e()(this,"_onlineFriends",{}),this._application=t}intervalFriends(){this.updateFriends().then(t=>{const e=[];for(const r in t)"Offline"!==t[r].presenceState&&e.push(t[r]);this._onlineFriends=e}).catch(t=>{console.log("xboxWorker - Error updating friends:",t)})}updateFriends(){return new(W())((t,e)=>{this._application._webApi.getProvider("people").getFriends().then(e=>{for(const t in e.people)this._friends[e.people[t].xuid]=e.people[t];t(this._friends)}).catch(t=>{e(t)})})}}p(1265),p(7189),p(7831),p(2181);const rt="1.9.3";var nt=p(7169),st=p.n(nt);class ot{constructor(t){e()(this,"data",void 0),this.data=t}calculateSecondsLeft(t){const e=t,r=new Date;return Math.floor((e.getTime()-r.getTime())/1e3)}getSecondsValid(){return console.log("Warning: getSecondsValid not implemented"),0}isValid(){return console.log("Warning: isValid not implemented"),!1}getUserHash(){return"UserToken"in this.data&&this.data.UserToken.DisplayClaims.xui[0].uhs}getGamertag(){return"AuthorizationToken"in this.data&&this.data.AuthorizationToken.DisplayClaims.xui[0].gtg}}class it extends ot{constructor(t){super(t),e()(this,"data",void 0),this.data=t}getSecondsValid(){const t=this.calculateSecondsLeft(new Date(this.data.TitleToken.NotAfter)),e=this.calculateSecondsLeft(new Date(this.data.UserToken.NotAfter)),r=this.calculateSecondsLeft(new Date(this.data.AuthorizationToken.NotAfter));return Math.min(t,e,r)}isValid(){if(this.calculateSecondsLeft(new Date(this.data.TitleToken.NotAfter))<=0)return!1;if(this.calculateSecondsLeft(new Date(this.data.UserToken.NotAfter))<=0)return!1;return!(this.calculateSecondsLeft(new Date(this.data.AuthorizationToken.NotAfter))<=0)}getUserHash(){return this.data.UserToken.DisplayClaims.xui[0].uhs}getGamertag(){return this.data.AuthorizationToken.DisplayClaims.xui[0].gtg}}class at extends ot{constructor(t){super(t),e()(this,"data",void 0),this.data=t}calculateSecondsLeft(t){const e=t,r=new Date;return Math.floor((e.getTime()-r.getTime())/1e3)}getSecondsValid(){return this.calculateSecondsLeft(new Date(this.data.expires_on))}isValid(){return this.calculateSecondsLeft(new Date(this.data.expires_on))>0}}const ct=require("fs");var ut=p.n(ct);function lt(t,e){var r=a()(t);if(u()){var n=u()(t);e&&(n=h()(n).call(n,function(e){return g()(t,e).enumerable})),r.push.apply(r,n)}return r}function ht(t){for(var r=1;r<arguments.length;r++){var n,s,o=null!=arguments[r]?arguments[r]:{};r%2?m()(n=lt(Object(o),!0)).call(n,function(r){e()(t,r,o[r])}):y()?_()(t,y()(o)):m()(s=lt(Object(o))).call(s,function(e){S()(t,e,g()(o,e))})}return t}class pt{constructor(){e()(this,"_filepath",""),e()(this,"_userToken",void 0),e()(this,"_sisuToken",void 0),e()(this,"_jwtKeys",void 0),e()(this,"_tokenUpdateTime",void 0)}load(t,e=!1){if(this._filepath=t,ut().existsSync(t)){const e=ut().readFileSync(t);return this.loadJson(e.toString())}if(!e)throw new Error("TokenStore: File not found: "+t);return!1}loadJson(t){const e=JSON.parse(t);return e.userToken&&(this._userToken=new at(e.userToken)),e.sisuToken&&(this._sisuToken=new it(e.sisuToken)),e.jwtKeys&&(this._jwtKeys=e.jwtKeys),e.tokenUpdateTime&&(this._tokenUpdateTime=e.tokenUpdateTime),!0}setUserToken(t){const e=new Date;e.setSeconds(e.getSeconds()+t.data.expires_in),this._userToken=new at(ht(ht({},t.data),{},{expires_on:e.toISOString()}))}getUserToken(){return this._userToken}setSisuToken(t){this._sisuToken=new it(t.data)}getSisuToken(){return this._sisuToken}setJwtKeys(t){this._jwtKeys=t}save(){const t={userToken:this._userToken?.data,sisuToken:this._sisuToken?.data,jwtKeys:this._jwtKeys};ut().writeFileSync(this._filepath,o()(t,null,2))}removeAll(){ut().writeFileSync(this._filepath,o()({}))}hasValidAuthTokens(){return!!this._userToken&&(!!this._userToken.isValid()&&(!!this._sisuToken&&!!this._userToken.isValid()))}}var dt=p(5413),ft=p.n(dt),gt=p(6512),vt=p.n(gt),mt=p(6984),wt=p.n(mt);function yt(t,e){var r=a()(t);if(u()){var n=u()(t);e&&(n=h()(n).call(n,function(e){return g()(t,e).enumerable})),r.push.apply(r,n)}return r}function xt(t){for(var r=1;r<arguments.length;r++){var n,s,o=null!=arguments[r]?arguments[r]:{};r%2?m()(n=yt(Object(o),!0)).call(n,function(r){e()(t,r,o[r])}):y()?_()(t,y()(o)):m()(s=yt(Object(o))).call(s,function(e){S()(t,e,g()(o,e))})}return t}class _t{getRequest(t,e,r){return new(W())((n,s)=>{const o=xt({},r),i={method:"GET",hostname:t,path:e,port:443,headers:o},a=J().request(i,r=>{let o="";r.on("data",t=>{o+=t}),r.on("close",()=>{200==r.statusCode||204==r.statusCode?""===o.toString()?n(new bt({},r.headers)):n(new bt(JSON.parse(o.toString()),r.headers)):s({statuscode:r.statusCode,headers:r.headers,body:o.toString(),message:"Error fetching "+t+e})})});a.on("error",t=>{s(t)}),a.end()})}postRequest(t,e,r,n){return new(W())((s,i)=>{const a=xt({},r);"object"==typeof n&&(n=o()(n));const c={method:"POST",hostname:t,path:e,port:443,headers:a},u=J().request(c,r=>{let n="";r.on("data",t=>{n+=t}),r.on("close",()=>{200==r.statusCode||202==r.statusCode?""===n.toString()?s(new bt({},r.headers)):s(new bt(JSON.parse(n.toString()),r.headers)):i({statuscode:r.statusCode,headers:r.headers,body:n.toString(),message:"Error fetching "+t+e})})});u.on("error",t=>{i(t)}),u.write(n),u.end()})}}class bt{constructor(t,r){e()(this,"data",void 0),e()(this,"headers",void 0),this.data=t,this.headers=r}header(){return this.headers}body(){return this.data}}const St=require("crypto");var kt=p.n(St),Tt=p(9603);class At extends ot{constructor(t){super(t),e()(this,"data",void 0),this.data=t}getSecondsValid(){return this.calculateSecondsLeft(new Date(this.data.NotAfter))}isValid(){return!(this.calculateSecondsLeft(new Date(this.data.NotAfter))<=0)}}class Ct extends ot{constructor(t){super(t),e()(this,"data",void 0),e()(this,"_objectCreateTime",st()()),this.data=t}calculateSecondsLeft(t){const e=t,r=new Date;return Math.floor((e.getTime()-r.getTime())/1e3)}getSecondsValid(){return this._objectCreateTime+1e3*this.data.durationInSeconds?this.calculateSecondsLeft(new Date(this._objectCreateTime+1e3*this.data.durationInSeconds)):0}isValid(){if(this._objectCreateTime+1e3*this.data.durationInSeconds){return this.calculateSecondsLeft(new Date(this._objectCreateTime+1e3*this.data.durationInSeconds))>0}return!1}getMarket(){return this.data.market}getRegions(){return this.data.offeringSettings.regions}getDefaultRegion(){var t;return h()(t=this.data.offeringSettings.regions).call(t,t=>t.isDefault)[0]}setDefaultRegion(t){var e;m()(e=this.data.offeringSettings.regions).call(e,e=>{e.name===t?e.isDefault=!0:e.isDefault=!1})}getEnvironments(){return this.data.offeringSettings.clientCloudSettings.Environments}}class Pt extends ot{constructor(t){super(t),e()(this,"data",void 0),this.data=t}getSecondsValid(){return this.calculateSecondsLeft(new Date(this.data.NotAfter))}isValid(){return!(this.calculateSecondsLeft(new Date(this.data.NotAfter))<=0)}}class Ot extends ot{constructor(t){super(t),e()(this,"data",void 0),this.data=t}}function jt(t,e){var r=a()(t);if(u()){var n=u()(t);e&&(n=h()(n).call(n,function(e){return g()(t,e).enumerable})),r.push.apply(r,n)}return r}function Rt(t){for(var r=1;r<arguments.length;r++){var n,s,o=null!=arguments[r]?arguments[r]:{};r%2?m()(n=jt(Object(o),!0)).call(n,function(r){e()(t,r,o[r])}):y()?_()(t,y()(o)):m()(s=jt(Object(o))).call(s,function(e){S()(t,e,g()(o,e))})}return t}const Ut=p(8109),Lt=()=>Ut.v3({namespace:"6ba7b811-9dad-11d1-80b4-00c04fd430c8",name:st()().toString()});class Et{constructor(t){e()(this,"keys",void 0),e()(this,"jwtKeys",void 0),e()(this,"deviceTokenRetryCount",void 0),e()(this,"tokenStore",void 0),e()(this,"_app",{AppId:"000000004c20a908",TitleId:"328178078",RedirectUri:"ms-xal-000000004c20a908://auth"}),e()(this,"codeChallange",void 0),e()(this,"_webToken",void 0),e()(this,"_xhomeToken",void 0),e()(this,"_xcloudToken",void 0),t&&t._jwtKeys&&(this.setKeys(t._jwtKeys.jwt).then(t=>{console.log("Keys loaded:",t)}).catch(t=>{console.log("Failed to load keys:",t)}),this.tokenStore=t),this.deviceTokenRetryCount=0}setKeys(t){return new(W())((e,r)=>{St.subtle.importKey("jwk",t,{name:"ECDSA",namedCurve:"P-256"},!0,["sign"]).then(r=>{const n=St.KeyObject.from(r);this.jwtKeys={raw:{privateKey:n},jwt:t},e(this.jwtKeys)}).catch(t=>{console.log("key error:",t),r(t)})})}getKeys(){return new(W())((t,e)=>{void 0!==this.jwtKeys?t(this.jwtKeys):void 0===ft()(this)?(this.keys=kt().generateKeyPairSync("ec",{namedCurve:"P-256"}),this.jwtKeys={raw:ft()(this)},(0,Tt.exportJWK)(ft()(this).publicKey).then(r=>{const n=Rt(Rt({},r),{},{alg:"ES256",use:"sig"});this.jwtKeys={raw:ft()(this),jwt:n};const s=this.jwtKeys.raw.privateKey.export({type:"pkcs8",format:"jwk"});this.setKeys(s).then(e=>{t(e)}).catch(t=>{e(t)})})):t(this.jwtKeys)})}getCodeChallange(){return new(W())((t,e)=>{if(void 0===this.codeChallange){const t=Buffer.from(kt().pseudoRandomBytes(32)).toString("base64url"),e=kt().createHash("sha256").update(t).digest();this.codeChallange={value:e.toString("base64url"),method:"S256",verifier:t}}t(this.codeChallange)})}getRandomState(t=64){return kt().randomBytes(t).toString("base64url")}getDeviceTokenHack(){return console.log("getDeviceTokenHack..."),new(W())((t,e)=>{this.getDeviceToken().then(e=>{console.log("getDeviceToken success:",e),t(e)}).catch(r=>{if(400==r.statuscode){if(this.deviceTokenRetryCount<20)return console.log("device token get error, retry..."),this.deviceTokenRetryCount+=1,this.getDeviceTokenHack().then(t).catch(e);k.dialog.showMessageBox({message:"Error: Failed to refresh device token:"+o()(r)+", Please login again.",type:"error"}),this.tokenStore.clear&&this.tokenStore.clear(),e(r)}else e(r)})})}getDeviceToken(){return console.log("getDeviceToken..."),new(W())((t,e)=>{this.getKeys().then(r=>{const n={Properties:{AuthMethod:"ProofOfPossession",Id:`{${Lt()}}`,DeviceType:"Android",SerialNumber:`{${Lt()}}`,Version:"15.0",ProofKey:{use:"sig",alg:"ES256",kty:"EC",crv:"P-256",x:r.jwt.x,y:r.jwt.y}},RelyingParty:"http://auth.xboxlive.com",TokenType:"JWT"},s=o()(n),i=this.sign("https://device.auth.xboxlive.com/device/authenticate","",s,r).toString("base64"),a=Rt(Rt({},{"x-xbl-contract-version":"1","Cache-Control":"no-store, must-revalidate, no-cache"}),{},{Signature:i});(new _t).postRequest("device.auth.xboxlive.com","/device/authenticate",a,s).then(e=>{t(new At(e.body()))}).catch(t=>{this.jwtKeys=null,e(t)})})})}doSisuAuthentication(t,e,r){return new(W())((n,s)=>{this.getKeys().then(i=>{const a={AppId:this._app.AppId,TitleId:this._app.TitleId,RedirectUri:this._app.RedirectUri,DeviceToken:t.data.Token,Sandbox:"RETAIL",TokenType:"code",Offers:["service::user.auth.xboxlive.com::MBI_SSL"],Query:{display:"android_phone",code_challenge:e.value,code_challenge_method:e.method,state:r}},c=o()(a),u=this.sign("https://sisu.xboxlive.com/authenticate","",c,i).toString("base64"),l=Rt(Rt({},{"x-xbl-contract-version":"1","Cache-Control":"no-store, must-revalidate, no-cache"}),{},{Signature:u});(new _t).postRequest("sisu.xboxlive.com","/authenticate",l,c).then(t=>{const e=Rt({SessionId:t.headers["x-sessionid"]},t.body());n(e)}).catch(t=>{s(t)})})})}doSisuAuthorization(t,e,r){return console.log("doSisuAuthorization..."),new(W())((n,s)=>{this.getKeys().then(i=>{const a=Rt({AccessToken:"t="+t.data.access_token,AppId:this._app.AppId,DeviceToken:e.data.Token,Sandbox:"RETAIL",SiteName:"user.auth.xboxlive.com",UseModernGamertag:!0,ProofKey:{use:"sig",alg:"ES256",kty:"EC",crv:"P-256",x:i.jwt.x,y:i.jwt.y}},r?{SessionId:r}:{}),c=o()(a),u={"x-xbl-contract-version":"1","Cache-Control":"no-store, must-revalidate, no-cache",signature:this.sign("https://sisu.xboxlive.com/authorize","",c,i).toString("base64")};(new _t).postRequest("sisu.xboxlive.com","/authorize",u,c).then(t=>{n(new it(t.body()))}).catch(t=>{s(t)})})})}exchangeCodeForToken(t,e){return new(W())((r,n)=>{const s={client_id:this._app.AppId,code:t,code_verifier:e,grant_type:"authorization_code",redirect_uri:this._app.RedirectUri,scope:"service::user.auth.xboxlive.com::MBI_SSL"},o=new(vt())(s).toString();(new _t).postRequest("login.live.com","/oauth20_token.srf",{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-store, must-revalidate, no-cache"},o).then(t=>{r(new at(t.body()))}).catch(t=>{n(t)})})}refreshUserToken(t){return console.log("refreshUserToken..."),new(W())((e,r)=>{const n={client_id:this._app.AppId,grant_type:"refresh_token",refresh_token:t.data.refresh_token,scope:"service::user.auth.xboxlive.com::MBI_SSL"},s=new(vt())(n).toString();(new _t).postRequest("login.live.com","/oauth20_token.srf",{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-store, must-revalidate, no-cache"},s).then(t=>{console.log("refreshUserToken success: ",t.body()),e(new at(t.body()))}).catch(t=>{console.log("refreshUserToken fail:",t),r(t)})})}doXstsAuthorization(t,e){return new(W())((r,n)=>{this.getKeys().then(s=>{const i={Properties:{SandboxId:"RETAIL",UserTokens:[t.data.UserToken.Token]},RelyingParty:e,TokenType:"JWT"},a=o()(i),c=this.sign("https://xsts.auth.xboxlive.com/xsts/authorize","",a,s).toString("base64"),u=Rt(Rt({},{"x-xbl-contract-version":"1","Cache-Control":"no-store, must-revalidate, no-cache"}),{},{Signature:c});(new _t).postRequest("xsts.auth.xboxlive.com","/xsts/authorize",u,a).then(t=>{r(new Pt(t.body()))}).catch(t=>{n(t)})})})}exchangeRefreshTokenForXcloudTransferToken(t){return new(W())((e,r)=>{const n={client_id:this._app.AppId,grant_type:"refresh_token",scope:"service::http://Passport.NET/purpose::PURPOSE_XBOX_CLOUD_CONSOLE_TRANSFER_TOKEN",refresh_token:t.data.refresh_token,code:"",code_verifier:"",redirect_uri:""},s=new(vt())(n).toString();(new _t).postRequest("login.live.com","/oauth20_token.srf",{"Content-Type":"application/x-www-form-urlencoded","Cache-Control":"no-store, must-revalidate, no-cache"},s).then(t=>{e(new Ot(t.body()))}).catch(t=>{r(t)})})}getStreamToken(t,e,r=""){return new(W())((n,s)=>{const i={token:t.data.Token,offeringId:e},a=o()(i),c={"Content-Type":"application/json","Cache-Control":"no-store, must-revalidate, no-cache","x-gssv-client":"XboxComBrowser","Content-Length":a.length};r.length>0&&(c["x-forwarded-for"]=r);(new _t).postRequest(e+".gssv-play-prod.xboxlive.com","/v2/login/user",c,a).then(t=>{n(new Ct(t.body()))}).catch(t=>{s(t)})})}sign(t,e,r,n){const s=(BigInt(st()()/1e3|0)+BigInt(11644473600))*BigInt(1e7),o=new(wt())(t).pathname,i=19+o.length+1+e.length+1+r.length+1,a=Buffer.alloc(i);a.writeInt32BE(1),a.writeUInt8(0,4),a.writeBigUInt64BE(s,5),a.writeUInt8(0,13);let c=14;Buffer.from("POST").copy(a,c),a.writeUInt8(0,c+4),c=c+4+1,Buffer.from(o).copy(a,c),a.writeUInt8(0,c+o.length),c=c+o.length+1,Buffer.from(e).copy(a,c),a.writeUInt8(0,c+e.length),c=c+e.length+1,Buffer.from(r).copy(a,c),a.writeUInt8(0,c+r.length),c=c+r.length+1;const u=kt().sign("SHA256",a,{key:n.raw.privateKey,dsaEncoding:"ieee-p1363"}),l=Buffer.alloc(u.length+12);return l.writeInt32BE(1),l.writeBigUInt64BE(s,4),Buffer.from(u).copy(l,12),l}async refreshTokens(t){const e=t.getUserToken();if(void 0===e)throw new Error("User token is missing. Please authenticate first");try{const r=await this.refreshUserToken(e),n=await this.getDeviceTokenHack(),s=await this.doSisuAuthorization(r,n);return t.setUserToken(r),t.setSisuToken(s),t.save(),{userToken:r,deviceToken:n,sisuToken:s}}catch(t){throw new It("Failed to refresh tokens: "+o()(t))}}async getMsalToken(t){const e=t.getUserToken();if(void 0===e)throw new Error("User token is missing. Please authenticate first");return await this.exchangeRefreshTokenForXcloudTransferToken(e)}async getWebToken(t){const e=t.getSisuToken();if(void 0===e)throw new Error("Sisu token is missing. Please authenticate first");if(void 0===this._webToken||this._webToken.getSecondsValid()<=60){const t=await this.doXstsAuthorization(e,"http://xboxlive.com");return this._webToken=t,t}return this._webToken}async getStreamingToken(t){const e=t.getSisuToken();if(void 0===e)throw new Error("Sisu token is missing. Please authenticate first");const r=await this.doXstsAuthorization(e,"http://gssv.xboxlive.com/");if((void 0===this._xhomeToken||this._xhomeToken.getSecondsValid()<=60)&&(this._xhomeToken=await this.getStreamToken(r,"xhome")),void 0===this._xcloudToken||this._xcloudToken.getSecondsValid()<=60)try{this._xcloudToken=await this.getStreamToken(r,"xgpuweb")}catch(t){console.error("[getStreamingToken] xgpuweb error:",t);try{this._xcloudToken=await this.getStreamToken(r,"xgpuwebf2p")}catch(t){console.error("[getStreamingToken] xgpuwebf2p error:",t)}}return{xHomeToken:this._xhomeToken,xCloudToken:this._xcloudToken}}async getRedirectUri(){const t=await this.getDeviceTokenHack(),e=await this.getCodeChallange(),r=this.getRandomState();return{sisuAuth:await this.doSisuAuthentication(t,e,r),state:r,codeChallange:e}}async authenticateUser(t,e,r){const n=new(wt())(r);if(n.searchParams.get("error")){n.searchParams.get("error_description");return!1}const s=n.searchParams.get("code");if(s){const r=n.searchParams.get("state");if(r)return this.authenticateUserUsingCode(t,e,s,r)}return!1}async authenticateUserUsingCode(t,e,r,n){if(console.log("authenticateUser:",r,n),n!==e.state)return!1;const s=await this.getCodeChallange(),o=await this.exchangeCodeForToken(r,s.verifier);return t.setUserToken(o),t.setJwtKeys(this.jwtKeys),t.save(),!0}}class It extends Error{}class Dt extends pt{constructor(...t){super(...t),e()(this,"_store",new(P()))}load(){const t=this._store.get("user.tokenstore","{}");return this.loadJson(t),!0}save(){const t=o()({userToken:this._userToken?.data,sisuToken:this._sisuToken?.data,jwtKeys:this._jwtKeys,tokenUpdateTime:st()()});this._store.set("user.tokenstore",t)}getTokenUpdateTime(){const t=this._store.get("user.tokenstore","{}");return this.loadJson(t),this._tokenUpdateTime}clear(){this._store.delete("user.tokenstore"),this._userToken=void 0,this._sisuToken=void 0,this._jwtKeys=void 0}}const Mt=new(P()),Ft="user.streamToken",Nt=t=>{console.log("saveStreamToken:",t);try{Mt.set(Ft,t)}catch(t){Mt.set(Ft,{})}},Bt=()=>{Mt.set(Ft,{})},Wt=t=>{if(!t)return!1;const{data:e,_objectCreateTime:r}=t;return!(!e||!e.durationInSeconds)&&r+1e3*e.durationInSeconds-(new Date).getTime()>6e4},qt=new(P()),Vt="user.webToken",Ht=t=>{console.log("saveStreamToken:",t);try{qt.set(Vt,t)}catch(t){qt.set(Vt,{})}},zt=()=>{qt.set(Vt,{})},Kt=t=>!!(t&&t.data&&t.data.NotAfter)&&!((t=>{const e=t,r=new Date;return Math.floor((e.getTime()-r.getTime())/1e3)})(new Date(t.data.NotAfter))<=0);class Gt{constructor(t){e()(this,"_application",void 0),e()(this,"_tokenStore",void 0),e()(this,"_xal",void 0),e()(this,"_authWindow",void 0),e()(this,"_authCallback",void 0),e()(this,"_isAuthenticating",!1),e()(this,"_isAuthenticated",!1),e()(this,"_appLevel",0),this._application=t,this._tokenStore=new Dt,this._tokenStore.load(),this._xal=new Et(this._tokenStore)}checkAuthentication(){return this._isAuthenticating=!0,this._isAuthenticated=!1,this._application.log("authenticationV2","[checkAuthentication()] Starting token check..."),this._tokenStore.hasValidAuthTokens()?(this._application.log("authenticationV2","[checkAuthentication()] Tokens are valid."),this.startSilentFlow(),!0):void 0!==this._tokenStore.getUserToken()?(this._application.log("authenticationV2","[checkAuthentication()] Tokens are expired but we have a user token. Lets try to refresh the tokens."),this.startSilentFlow(),!0):(this._application.log("authenticationV2","[checkAuthentication()] No tokens are present."),!1)}startSilentFlow(){this._application.log("authenticationV2","[startSilentFlow()] Starting silent flow..."),this._isAuthenticating=!0;const t=(()=>{try{return Mt.get(Ft)||null}catch{return null}})(),e=(()=>{try{return qt.get(Vt)||null}catch{return null}})();if(t&&(t.xHomeToken||t.xCloudToken)&&e){const{xHomeToken:r,xCloudToken:n}=t;console.log("startSilentFlow xCloudToken:",n),(r||n)&&(this._appLevel=1,n&&(this._appLevel=2),r&&Wt(r)&&Kt(e)||n&&Wt(n)&&Kt(e)?this._application.authenticationCompleted({xHomeToken:r?new Ct(r.data):r,xCloudToken:n?new Ct(n.data):n},e):(console.log("Skip refreshTokens within 23 hours"),st()()-this._tokenStore.getTokenUpdateTime()<828e5?(console.log("[startSilentFlow] skip refreshTokens - branch1"),this.getStreamingToken(this._tokenStore).then(t=>{this._xal.getWebToken(this._tokenStore).then(e=>{null!==t.xCloudToken?this._appLevel=2:this._appLevel=1,Nt(t),Ht(e),this._application.authenticationCompleted(t,e)})})):this._xal.refreshTokens(this._tokenStore).then(()=>{console.log("[startSilentFlow()] Tokens have been refreshed - branch1"),this.getStreamingToken(this._tokenStore).then(t=>{this._xal.getWebToken(this._tokenStore).then(e=>{null!==t.xCloudToken?this._appLevel=2:this._appLevel=1,Nt(t),Ht(e),this._application.authenticationCompleted(t,e)})})}).catch(t=>{Bt(),zt(),this._tokenStore.clear(),k.dialog.showMessageBox({message:"[startSilentFlow() - 182] refreshTokens error:"+t.message,type:"error"})})))}else this._xal.refreshTokens(this._tokenStore).then(()=>{this._application.log("authenticationV2","[startSilentFlow()] Tokens have been refreshed"),this.getStreamingToken(this._tokenStore).then(t=>{null!==t.xCloudToken?(this._application.log("authenticationV2","[startSilentFlow()] Retrieved both xHome and xCloud tokens"),this._appLevel=2):(this._application.log("authenticationV2","[startSilentFlow()] Retrieved xHome token only"),this._appLevel=1),this._xal.getWebToken(this._tokenStore).then(e=>{this._application.log("authenticationV2",__filename+"[startSilentFlow()] Web token received"),Nt(t),Ht(e),this._application.authenticationCompleted(t,e)}).catch(t=>{this._application.log("authenticationV2",__filename+"[startSilentFlow()] Failed to retrieve web tokens:",t),Bt(),zt(),this._tokenStore.clear(),k.dialog.showMessageBox({message:"Error: Failed to retrieve web tokens:"+o()(t),type:"error"})})}).catch(t=>{this._application.log("authenticationV2","[startSilentFlow()] Failed to retrieve streaming tokens:",t),Bt(),zt(),this._tokenStore.clear(),k.dialog.showMessageBox({message:"Error: Failed to retrieve streaming tokens:"+o()(t),type:"error"})})}).catch(t=>{Bt(),zt(),this._tokenStore.clear(),k.dialog.showMessageBox({message:"[startSilentFlow() - 275] refreshTokens error:"+t.message,type:"error"})})}startAuthflow(){this._application.log("authenticationV2","[startAuthflow()] Starting authentication flow"),this._xal.getRedirectUri().then(t=>{this.openAuthWindow(t.sisuAuth.MsaOauthRedirect),this._authCallback=e=>{this._isAuthenticating=!0,this._application.log("authenticationV2","[startAuthFlow()] Got redirect URI:",e),this._xal.authenticateUser(this._tokenStore,t,e).then(t=>{this._application.log("authenticationV2","[startAuthFlow()] Authenticated user:",t),this.startSilentFlow()}).catch(t=>{this._application.log("authenticationV2","[startAuthFlow()] Error authenticating user:",t),k.dialog.showErrorBox("Error","Error authenticating user. Error details: "+o()(t))})}}).catch(t=>{this._application.log("authenticationV2","[startAuthFlow()] Error getting redirect URI:",t),k.dialog.showErrorBox("Error","Error getting redirect URI. Error details: "+o()(t))})}startWebviewHooks(){this._application.log("authenticationV2","[startWebviewHooks()] Starting webview hooks"),k.session.defaultSession.webRequest.onHeadersReceived({urls:["https://login.live.com/oauth20_authorize.srf?*","https://login.live.com/ppsecure/post.srf?*"]},(t,e)=>{var r;void 0!==t.responseHeaders.Location&&n()(r=t.responseHeaders.Location[0]).call(r,this._xal._app.RedirectUri)?(this._application.log("authenticationV2","[startWebviewHooks()] Got redirect URI from OAUTH:",t.responseHeaders.Location[0]),this._authWindow.close(),void 0!==this._authCallback?this._authCallback(t.responseHeaders.Location[0]):(this._application.log("authenticationV2","[startWebviewHooks()] Authentication Callback is not defined:",this._authCallback),k.dialog.showErrorBox("Error","Authentication Callback is not defined. Error details: "+o()(this._authCallback))),e({cancel:!0})):e(t)})}openAuthWindow(t){const e=N("auth",{width:500,height:600,title:"Authentication"});e.loadURL(t),this._authWindow=e,this._authWindow.on("close",()=>{this._application.log("authenticationV2","[openAuthWindow()] Closed auth window")})}async getStreamingToken(t){const e=t.getSisuToken();if(void 0===e)throw new Error("Sisu token is missing. Please authenticate first");const r=await this._xal.doXstsAuthorization(e,"http://gssv.xboxlive.com/");(void 0===this._xal._xhomeToken||this._xal._xhomeToken.getSecondsValid()<=60)&&(this._xal._xhomeToken=await this._xal.getStreamToken(r,"xhome"));const n=this._application._store.get("settings",Z);if(console.log("settings.force_region_i1111p:",n.force_region_ip),!this._xal._xcloudToken||this._xal._xcloudToken.getSecondsValid()<=60)try{this._xal._xcloudToken=await this._xal.getStreamToken(r,"xgpuweb",n.force_region_ip)}catch(t){this._application.log("authenticationV2",t);try{this._xal._xcloudToken=await this._xal.getStreamToken(r,"xgpuwebf2p",n.force_region_ip)}catch(t){this._application.log("authenticationV2",t),this._xal._xcloudToken=null}}return{xHomeToken:this._xal._xhomeToken,xCloudToken:this._xal._xcloudToken}}}function Xt(t,e){var r=a()(t);if(u()){var n=u()(t);e&&(n=h()(n).call(n,function(e){return g()(t,e).enumerable})),r.push.apply(r,n)}return r}function Jt(t){for(var r=1;r<arguments.length;r++){var n,s,o=null!=arguments[r]?arguments[r]:{};r%2?m()(n=Xt(Object(o),!0)).call(n,function(r){e()(t,r,o[r])}):y()?_()(t,y()(o)):m()(s=Xt(Object(o))).call(s,function(e){S()(t,e,g()(o,e))})}return t}const $t=class{get(t,e,r){return new(W())((n,s)=>{const o=Jt({},r);Q().get(`https://${t}${e}`,{headers:o}).then(r=>{200===r.status||204===r.status?n(r.data):n({statuscode:r.code,headers:r.headers,body:r.data,message:"Error fetching "+t+e})}).catch(t=>{s(t)})})}post(t,e,r,n){return new(W())((s,i)=>{const a=Jt({},r);"object"==typeof n&&(n=o()(n)),Q().post(`https://${t}${e}`,n,{headers:a}).then(r=>{200===r.status||202===r.status?s(r.data):s({statuscode:r.code,headers:r.headers,body:r.data,message:"Error fetching "+t+e})}).catch(t=>{i(t)})})}};class Yt{constructor(t){e()(this,"_application",void 0),this._application=t}onEvent(t,e,r){if(this._application.log("Ipc:Recv","Received event: ["+t+"]",r),"function"==typeof this[r.action]){(a()(r.data).length>0?this[r.action](r.data):this[r.action]()).then(e=>{this.send(t,{action:r.action,id:r.id,data:e})}).catch(e=>{console.log("ERROR: IPC communication error from backend:",e),this.send(t,{action:r.action,id:r.id,data:{},error:e})})}else this._application.log("Ipc","ERROR: Action was not found:",r.action,"on channel",t),this.send(t,{action:r.action,id:r.id,data:{},error:"IPC action failure. Action was not found: "+t+":"+r.action})}send(t,e){this._application.log("Ipc:Send","Sending event: ["+t+"]",o()(e)),this._application._mainWindow.webContents.send(t,{action:e.action,id:e.id,data:e.data,error:e.error})}}var Qt=p(8109),Zt=p.n(Qt);class te extends Yt{constructor(...t){super(...t),e()(this,"_consoles",[]),e()(this,"_consolesLastUpdate",0)}sendCommand(t,e,r,n){console.log("[sendCommand]:",t,e,r);const s=new $t;void 0===n&&(n=[]);const i={destination:"Xbox",type:e,command:r,sessionId:Zt().v3({namespace:"6ba7b811-9dad-11d1-80b4-00c04fd430c8",name:st()().toString()}),sourceId:"com.microsoft.smartglass",parameters:n,linkedXboxId:t};return new(W())(t=>{s.post("xccs.xboxlive.com","/commands",{Authorization:"XBL3.0 x="+this._application.webToken.data.DisplayClaims.xui[0].uhs+";"+this._application.webToken.data.Token,"Accept-Language":"en-US",skillplatform:"RemoteManagement","x-xbl-contract-version":"4","x-xbl-client-name":"XboxApp","x-xbl-client-type":"UWA","x-xbl-client-version":"39.39.22001.0"},i).then(e=>{console.log("[sendCommand] /commands/ response:",o()(e)),e.result?t(e.result):t([])}).catch(()=>{t([])})})}get(){return new(W())((t,e)=>{this._consolesLastUpdate<st()()-6e4?this._application._webApi.getProvider("smartglass").getConsolesList().then(e=>{var r;this._consoles=e.result,m()(r=this._consoles).call(r,t=>{t.serverId=t.id,t.deviceName=t.name}),this._consolesLastUpdate=st()(),t(this._consoles)}).catch(t=>{e(t)}):t(this._consoles)})}powerOn(t){return new(W())((e,r)=>{this.sendCommand(t,"Power","WakeUp").then(t=>{e(t)}).catch(t=>{r(t)})})}sendText(t){const{consoleId:e,text:r}=t;return this.sendCommand(e,"Shell","InjectString",[{replacementString:r}])}powerOff(t){return new(W())((e,r)=>{this.sendCommand(t,"Power","TurnOff").then(t=>{e(t)}).catch(t=>{r(t)})})}}class ee{constructor(t){e()(this,"_application",void 0),e()(this,"_sessions",{}),this._application=t}getApi(t){const e=this._application.streamingTokens;return"home"===t?new tt(this._application,e.xHomeToken.getDefaultRegion().baseUri.substring(8),e.xHomeToken.data.gsToken,"home"):new tt(this._application,e.xCloudToken.getDefaultRegion().baseUri.substring(8),e.xCloudToken.data.gsToken,"cloud")}getSession(t){return this._sessions[t]}startStream(t,e){return new(W())((r,n)=>{this.getApi(t).startStream(e).then(n=>{console.log("Streammanager - startStream:",n);const s=n.sessionPath.split("/")[3],o={id:s,target:e,path:n.sessionPath,type:t,playerState:"pending"};this._sessions[s]=o,this.monitorSession(s),r(s)}).catch(t=>{n(t)})})}stopStream(t){return new(W())((e,r)=>{const n=this.getSession(t);void 0!==n?this.getApi(n.type).stopStream(t).then(r=>{console.log("Current sessions:",this._sessions),delete this._sessions[t],console.log("new sessions:",this._sessions),e(r)}).catch(t=>{r(t)}):r("Session not found: "+t)})}sendSdp(t,e){return new(W())((r,n)=>{const s=this.getSession(t);void 0!==s?this.getApi(s.type).sendSdp(t,e).then(t=>{r(t)}).catch(t=>{n(t)}):n("Session not found: "+t)})}sendChatSdp(t,e){return new(W())((r,n)=>{const s=this.getSession(t);void 0!==s?this.getApi(s.type).sendChatSdp(t,e).then(t=>{r(t)}).catch(t=>{n(t)}):n("Session not found: "+t)})}sendIce(t,e){return new(W())((r,n)=>{const s=this.getSession(t);void 0!==s?this.getApi(s.type).sendIce(t,e).then(t=>{r(t)}).catch(t=>{n(t)}):n("Session not found: "+t)})}sendKeepalive(t){return new(W())((e,r)=>{const n=this.getSession(t);void 0!==n?this.getApi(n.type).sendKeepalive(t).then(t=>{e(t)}).catch(t=>{r(t)}):r("Session not found: "+t)})}monitorSession(t){V()(()=>{this._application.log("StreamManager","monitorSession("+t+") checking state");void 0!==this.getSession(t)?this.getApi(this.getSession(t).type).getStreamState(t).then(e=>{console.log("Streammanager - state:",e),this.getSession(t).state=e.state,"Provisioned"===e.state?this.getSession(t).playerState="started":"Provisioning"===e.state?this.monitorSession(t):"ReadyToConnect"===e.state?this._application._authentication._xal.getMsalToken(this._application._authentication._tokenStore).then(e=>{this.getApi(this.getSession(t).type).sendMSALAuth(t,e.data.lpt).then(()=>{this.monitorSession(t)}).catch(t=>{console.log("MSAL AUTH Error:",t),alert("MSAL AUTH Error:"+t)})}).catch(t=>{console.log("MSAL AUTH Error:",t),alert("MSAL AUTH Error:"+t)}):"WaitingForResources"===e.state?(void 0===this.getSession(t).waitingTimes&&this.getApi(this.getSession(t).type).getWaitingTimes(this.getSession(t).target).then(e=>{this.getSession(t).waitingTimes=e,this.getSession(t).playerState="queued"}),this.monitorSession(t)):"Failed"===e.state?(this.getSession(t).errorDetails=e.errorDetails,this.getSession(t).playerState="failed"):console.log("Unknown state:",e)}).catch(e=>{console.log("Streammanager - error checking state:",t,e),404===e.status?(this._application.log("StreamManager","Session not found on server. Removing session..."),delete this._sessions[t]):this.monitorSession(t)}):this._application.log("StreamManager","monitorSession("+t+") session not found")},1e3)}getActiveSessions(){return new(W())((t,e)=>{this.getApi("cloud").getActiveSessions().then(e=>{console.log("Active sessions:",e),t(e)}).catch(t=>{e(t)})})}inputConfigs(t){return new(W())((e,r)=>{this.getApi("home").inputConfigs(t).then(t=>{console.log("inputConfigs res:",t),e("")}).catch(t=>{r(t)})})}getConsoles(){return new(W())(t=>{this.getApi("home").getConsoles().then(e=>{t(e)}).catch(()=>{t([])})})}}class re extends Yt{constructor(t){super(t),e()(this,"_streamManager",void 0),this._streamManager=new ee(t)}startStream(t){return"home"===t.type?this._application._ipc._channels.consoles._consolesLastUpdate=0:this._application._ipc._channels.xCloud._recentTitlesLastUpdate=0,this._streamManager.startStream(t.type,t.target)}stopStream(t){return this._streamManager.stopStream(t.sessionId)}sendSdp(t){return this._streamManager.sendSdp(t.sessionId,t.sdp)}sendChatSdp(t){return this._streamManager.sendChatSdp(t.sessionId,t.sdp)}sendIce(t){return this._streamManager.sendIce(t.sessionId,t.ice)}sendKeepalive(t){return this._streamManager.sendKeepalive(t.sessionId)}getPlayerState(t){return new(W())(e=>{e(this._streamManager.getSession(t.sessionId))})}activeSessions(){return this._streamManager.getActiveSessions()}inputConfigs(t){return this._streamManager.inputConfigs(t.xboxTitleId)}getConsoles(){return this._streamManager.getConsoles()}}var ne=p(6615),se=p.n(ne),oe=p(3363),ie=p.n(oe),ae=p(1426),ce=p.n(ae),ue=p(4007),le=p.n(ue);class he{constructor(t){e()(this,"_application",void 0),this._application=t}get(t,e,r="GET"){return new(W())((n,s)=>{let o="";const i=J().request({host:t,path:e,method:r,headers:{"Content-Type":"application/json"}},t=>{t.on("data",t=>{o+=t}),t.on("end",()=>{if(t.statusCode>=200&&t.statusCode<=299){this._application.log("HTTP","get("+e+", "+r+") resolve:",t.statusCode);let i=o;try{i=JSON.parse(o)}catch(t){}204===t.statusCode?V()(()=>{this.get(e,r).then(t=>{n(t)}).catch(t=>{s(t)})},750):n(i)}else this._application.log("HTTP","get("+e+") reject:",t.statusCode),s({url:e,status:t.statusCode,body:o})})});i.on("error",t=>{s(t)}),i.end()})}post(t,e,r={},n={}){return new(W())((s,i)=>{let a="";const c=U()({},{"Content-Type":"application/json"},n),u=J().request({host:t,path:e,method:"POST",headers:c},t=>{t.on("data",t=>{a+=t}),t.on("end",()=>{if(t.statusCode>=200&&t.statusCode<=299){this._application.log("HTTP","post("+e+") resolve:",t.statusCode,a.substring(0,100));let r=a;try{r=JSON.parse(a)}catch(t){}s(r)}else this._application.log("HTTP","post("+e+") reject:",t.statusCode),i({url:e,status:t.statusCode,body:a})})});u.on("error",t=>{i(t)}),u.write(o()(r)),u.end()})}}function pe(t,e){var r=a()(t);if(u()){var n=u()(t);e&&(n=h()(n).call(n,function(e){return g()(t,e).enumerable})),r.push.apply(r,n)}return r}function de(t){for(var r=1;r<arguments.length;r++){var n,s,o=null!=arguments[r]?arguments[r]:{};r%2?m()(n=pe(Object(o),!0)).call(n,function(r){e()(t,r,o[r])}):y()?_()(t,y()(o)):m()(s=pe(Object(o))).call(s,function(e){S()(t,e,g()(o,e))})}return t}class fe{constructor(t){e()(this,"_application",void 0),e()(this,"_store",new(P())),e()(this,"_http",void 0),e()(this,"_xCloudTitles",{}),e()(this,"_productIdQueue",[]),e()(this,"_xCloudRecentTitles",{}),e()(this,"_xCloudRecentTitlesLastUpdate",0),this._application=t,this._http=new he(this._application)}getOfficialTitles(){return new(W())(t=>{let e=[];Q().get("https://cdn.jsdelivr.net/gh/Geocld/XStreaming@main/titles.json",{timeout:1e4}).then(r=>{200===r.status&&(e=r.data.Products),t(e)}).catch(()=>{t([])})})}getGamePassProducts(t){return new(W())(e=>{const r=[],n={};se()(t)||e([]),m()(t).call(t,t=>{t.details&&t.details.productId&&(r.push(t.details.productId),n[t.details.productId]=t)}),this.getOfficialTitles().then(t=>{this.getCatalogGames(r,n).then(r=>{this.getCatalogGames(t,n).then(t=>{let n=[...r,...t];z()(n).call(n,(t,e)=>t.ProductTitle.localeCompare(e.ProductTitle)),n=ie()(n).call(n,(t,e)=>(ce()(t).call(t,t=>t.ProductTitle===e.ProductTitle)||t.push(e),t),[]),e(n)})})})})}getCatalogGames(t=[],e={}){var r;const n=this._application._store.get("settings",Z),s=le()(r=n.preferred_game_language).call(r,"zh")>-1?"zh-TW":"en-US";return new(W())(r=>{Q().post(`https://catalog.gamepass.com/v3/products?market=US&language=${s}&hydration=RemoteLowJade0`,{Products:[...t]},{headers:{Accept:"application/json","Content-Type":"application/json","ms-cv":0,"calling-app-name":"Xbox Cloud Gaming Web","calling-app-version":"24.17.63"}}).then(t=>{if(console.log("POST catalog.gamepass.com/v3/products success"),t.data&&t.data.Products){const n=t.data.Products;let s=[];for(const t in n)e[t]?s.push(de(de({productId:t},n[t]),e[t])):s.push(de({productId:t},n[t]));z()(s).call(s,(t,e)=>t.ProductTitle.localeCompare(e.ProductTitle)),s=h()(s).call(s,t=>t.titleId||t.XCloudTitleId),r(s)}else r([])}).catch(t=>{console.log("getGamePassProducts error:",t),r([])})})}getNewTitles(){return this._http.get("catalog.gamepass.com","/sigls/v2?id=f13cf6b4-57e6-4459-89df-6aec18cf0538&market=US&language=en-US")}}class ge{constructor(t){e()(this,"_application",void 0),this._application=t}getHistoryAchivements(){const t=new $t,e=this._application._store.get("settings",{}).preferred_game_language||"en-US";return new(W())((r,n)=>{const s=this._application.webToken.data.DisplayClaims.xui[0].uhs,o=this._application.webToken.data.DisplayClaims.xui[0].xid;t.get("achievements.xboxlive.com",`/users/xuid(${o})/history/titles?orderBy=unlockTime`,{Authorization:"XBL3.0 x="+s+";"+this._application.webToken.data.Token,"Accept-Language":e,"x-xbl-contract-version":2,"x-xbl-client-name":"XboxApp","x-xbl-client-type":"UWA","x-xbl-client-version":"39.39.22001.0"}).then(t=>{t.titles?r(t.titles):r([])}).catch(t=>{console.log("[getHistoryAchivements] error:",t),n(t)})})}getAchivementDetail(t){const e=new $t,r=this._application._store.get("settings",{}).preferred_game_language||"en-US";return new(W())((n,s)=>{const o=this._application.webToken.data.DisplayClaims.xui[0].uhs,i=this._application.webToken.data.DisplayClaims.xui[0].xid;e.get("achievements.xboxlive.com",`/users/xuid(${i})/achievements?titleId=${t}&maxItems=1000`,{Authorization:"XBL3.0 x="+o+";"+this._application.webToken.data.Token,"Accept-Language":r,"x-xbl-contract-version":2,"x-xbl-client-name":"XboxApp","x-xbl-client-type":"UWA","x-xbl-client-version":"39.39.22001.0"}).then(t=>{t.achievements?n(t.achievements):n([])}).catch(t=>{console.log("[getAchivementDetail] error:",t),s(t)})})}}class ve extends Yt{constructor(t){super(t),e()(this,"_titleManager",void 0),e()(this,"_achivementManager",void 0),e()(this,"_titlesAreLoaded",!1),e()(this,"_titles",[]),e()(this,"_titlesLastUpdate",0),e()(this,"_recentTitles",[]),e()(this,"_recentTitlesLastUpdate",0),e()(this,"_newTitles",[]),e()(this,"_newTitlesLastUpdate",0),this._titleManager=new fe(t),this._achivementManager=new ge(t)}startUp(){this._application.log("Ipc:xCloud","Starting xCloud IPC Channel...")}getRecentTitles(){const t=this._application.streamingTokens;let e=new tt(this._application,"ckr.core.gssv-play-prod.xboxlive.com","","cloud");return t.xCloudToken&&(e=new tt(this._application,t.xCloudToken.getDefaultRegion().baseUri.substring(8),t.xCloudToken.data.gsToken,"cloud")),e.getRecentTitles()}getXhomeToken(){return console.log("getXhomeToken"),new(W())(t=>{this._application.streamingTokens&&this._application.streamingTokens.xHomeToken?t(this._application.streamingTokens.xHomeToken.data):t(null)})}setXhomeTokenDefault(t){return new(W())(e=>{this._application.streamingTokens.xHomeToken.setDefaultRegion(t),e(null)})}getXcloudToken(){return console.log("getXcloudToken"),new(W())(t=>{this._application.streamingTokens&&this._application.streamingTokens.xCloudToken?t(this._application.streamingTokens.xCloudToken.data):t(null)})}setXcloudTokenDefault(t){return new(W())(e=>{this._application.streamingTokens.xCloudToken&&this._application.streamingTokens.xCloudToken.setDefaultRegion(t),e({})})}getTitles(){const t=this._application.streamingTokens,e=new tt(this._application,t.xCloudToken.getDefaultRegion().baseUri.substring(8),t.xCloudToken.data.gsToken,"cloud");return new(W())((t,r)=>{e.getTitles().then(e=>{t(e)}).catch(t=>{r(t)})})}getGamePassProducts(t){return this._titleManager.getGamePassProducts(t)}getNewTitles(){return this._titleManager.getNewTitles()}getHistoryAchivements(){return this._achivementManager.getHistoryAchivements()}getAchivementDetail(t){return this._achivementManager.getAchivementDetail(t)}}const me={a:0};class we extends Yt{loadCachedUser(){return new(W())(t=>{t(this.getUserState())})}getUserState(){const t=this._application._store.get("user.gamertag"),e=this._application._store.get("user.gamerpic"),r=this._application._store.get("user.gamerscore");return{signedIn:!!t,type:"user",gamertag:t||"",gamerpic:e||"",gamerscore:r||"",level:this._application._authentication._appLevel}}getAuthState(){return new(W())(t=>{t({isAuthenticating:this._application._authentication._isAuthenticating,isAuthenticated:this._application._authentication._isAuthenticated,user:this.getUserState()})})}getAppLevel(){return new(W())(t=>{t(this._application._authentication._appLevel)})}checkAuthentication(){return new(W())(t=>{t(this._application._authentication.checkAuthentication())})}login(){return new(W())(t=>{this._application._authentication.startAuthflow(),t(!0)})}quit(){return new(W())(t=>{t(!0),V()(()=>{this._application.quit()},100)})}restart(){return new(W())(t=>{t(!0),V()(()=>{this._application.restart()},100)})}clearData(){return new(W())((t,e)=>{k.session.defaultSession.clearStorageData().then(()=>{this._application._authentication._tokenStore.clear(),this._application._store.delete("user"),this._application._store.delete("auth"),this._application.log("authentication",__filename+"[startIpcEvents()] Received restart request. Restarting application..."),this._application.restart(),t(!0)}).catch(t=>{this._application.log("authentication",__filename+"[startIpcEvents()] Error: Failed to clear local storage!"),e(t)})})}clearUserData(){return new(W())((t,e)=>{k.session.defaultSession.clearStorageData().then(()=>{Bt(),zt(),t(!0)}).catch(t=>{e(t)})})}getOnlineFriends(){return new(W())(t=>{void 0===this._application._xboxWorker?t([]):t(this._application._xboxWorker._onlineFriends)})}onUiShown(){return new(W())(t=>{t({})})}isFullscreen(){return new(W())(t=>{t(this._application._mainWindow.isFullScreen())})}toggleFullscreen(){return new(W())(t=>{const e=this._application._mainWindow.isFullScreen();this._application._mainWindow.setFullScreen(!e),t({})})}enterFullscreen(){return new(W())(t=>{this._application._mainWindow.setFullScreen(!0),t({})})}exitFullscreen(){return new(W())(t=>{this._application._mainWindow.setFullScreen(!1),t({})})}hidController(){return new(W())(t=>{t({states:me})})}getStartupFlags(){return new(W())(t=>{t(this._application.getStartupFlags())})}resetAutostream(){return new(W())(t=>{this._application.resetAutostream(),t({})})}}function ye(t,e){var r=a()(t);if(u()){var n=u()(t);e&&(n=h()(n).call(n,function(e){return g()(t,e).enumerable})),r.push.apply(r,n)}return r}function xe(t){for(var r=1;r<arguments.length;r++){var n,s,o=null!=arguments[r]?arguments[r]:{};r%2?m()(n=ye(Object(o),!0)).call(n,function(r){e()(t,r,o[r])}):y()?_()(t,y()(o)):m()(s=ye(Object(o))).call(s,function(e){S()(t,e,g()(o,e))})}return t}class _e extends Yt{setSettings(t){return new(W())(e=>{const r=xe(xe({},Z),t);this._application._store.set("settings",r),e(r)})}getSettings(){return new(W())(t=>{const e=this._application._store.get("settings",Z);t(xe(xe({},Z),e))})}resetSettings(){return new(W())(t=>{const e=xe({},Z);this._application._store.delete("settings"),this._application._store.set("settings",e),t(e)})}}class be{constructor(t){e()(this,"_application",void 0),e()(this,"_channels",void 0),this._application=t,this._channels={streaming:new re(this._application),consoles:new te(this._application),app:new we(this._application),xCloud:new ve(this._application),settings:new _e(this._application)};for(const t in this._channels)k.ipcMain.on(t,(e,r)=>{this._channels[t].onEvent(t,e,r)})}startUp(){for(const t in this._channels)this._application.log("Ipc","Starting IPC channel: "+t),this._channels[t].startUp&&this._channels[t].startUp()}onUserLoaded(){for(const t in this._channels)this._channels[t].onUserLoaded&&(this._application.log("Ipc","Loading startup data for IPC channel: "+t),this._channels[t].onUserLoaded())}}var Se=p(2170),ke=p.n(Se);function Te(t,e){var r=a()(t);if(u()){var n=u()(t);e&&(n=h()(n).call(n,function(e){return g()(t,e).enumerable})),r.push.apply(r,n)}return r}class Ae{constructor(){e()(this,"_log",void 0),e()(this,"_store",new(P())),e()(this,"_startupFlags",{fullscreen:!1,autoStream:""}),e()(this,"_isProduction",!0),e()(this,"_isCi",void 0!==process.env.CI),e()(this,"_isMac","darwin"===process.platform),e()(this,"_isWindows","win32"===process.platform),e()(this,"_isQuitting",!1),e()(this,"_mainWindow",void 0),e()(this,"_ipc",void 0),e()(this,"_authentication",void 0),e()(this,"streamingTokens",void 0),e()(this,"webToken",void 0),e()(this,"_webApi",void 0),e()(this,"_xHomeApi",void 0),e()(this,"_xCloudApi",void 0),e()(this,"_xboxWorker",void 0),e()(this,"_gpuWindow",void 0),console.log(__filename+"[constructor()] Starting XStreaming v"+rt),this._log=j()("xstreaming");this._store.get("settings",Z).use_vulkan?(k.app.commandLine.appendSwitch("use-vulkan"),k.app.commandLine.appendSwitch("enable-features","Vulkan,VulkanFromANGLE,DefaultANGLEVulkan,VaapiIgnoreDriverChecks,VaapiVideoDecoder,PlatformHEVCDecoderSupport,CanvasOopRasterization"),k.app.commandLine.appendSwitch("enable-gpu-rasterization"),k.app.commandLine.appendSwitch("enable-oop-rasterization"),k.app.commandLine.appendSwitch("enable-accelerated-video-decode"),k.app.commandLine.appendSwitch("ozone-platform-hint","x11"),k.app.commandLine.appendSwitch("ignore-gpu-blocklist"),k.app.commandLine.appendSwitch("no-sandbox"),k.app.commandLine.appendSwitch("enable-zero-copy")):(k.app.commandLine.appendSwitch("ignore-gpu-blacklist"),k.app.commandLine.appendSwitch("enable-gpu-rasterization"),k.app.commandLine.appendSwitch("enable-oop-rasterization"),k.app.commandLine.appendSwitch("enable-accelerated-video-decode"),k.app.commandLine.appendSwitch("ozone-platform-hint","x11")),this.readStartupFlags(),this.loadApplicationDefaults(),this._ipc=new be(this),this._authentication=new Gt(this),this._ipc.startUp()}log(t="application",...e){this._log.extend(t)(...e)}getStartupFlags(){return this._startupFlags}resetAutostream(){this._startupFlags.autoStream=""}readStartupFlags(){this.log("application",__filename+"[readStartupFlags()] Program args detected:",process.argv);for(const r in process.argv){var t,e;if(n()(t=process.argv[r]).call(t,"--fullscreen")&&(this.log("application",__filename+"[readStartupFlags()] --fullscreen switch found. Setting fullscreen to true"),this._startupFlags.fullscreen=!0),n()(e=process.argv[r]).call(e,"--connect=")){const t=process.argv[r].substring(10);this.log("application",__filename+"[readStartupFlags()] --connect switch found. Setting autoStream to",t),this._startupFlags.autoStream=t}}this.log("application",__filename+"[readStartupFlags()] End result of startupFlags:",this._startupFlags)}loadApplicationDefaults(){if(!0===this._isProduction&&!1===this._isCi)A()({directory:"app"});else if(!0===this._isCi){const t=100*Math.random();k.app.setPath("userData",`${k.app.getPath("userData")} (${t})`),k.app.setPath("sessionData",`${k.app.getPath("userData")} (${t})`),this._store.delete("user"),this._store.delete("auth"),A()({directory:"app"})}else k.app.setPath("userData",`${k.app.getPath("userData")} (development)`);k.app.whenReady().then(()=>{this.log("electron",__filename+"[loadApplicationDefaults()] Electron has been fully loaded. Ready to open windows"),this.openMainWindow(),this._authentication.startWebviewHooks()}).catch(t=>{this.log("electron",__filename+"[loadApplicationDefaults()] Electron has failed to load:",t)}),k.app.on("window-all-closed",()=>{!0===this._isMac?this.log("electron",__filename+"[loadApplicationDefaults()] Electron detected that all windows are closed. Running in background..."):(this.log("electron",__filename+"[loadApplicationDefaults()] Electron detected that all windows are closed. Quitting app..."),k.app.quit())}),k.app.on("activate",()=>{void 0!==this._mainWindow?this._mainWindow.show():this.openMainWindow()}),k.app.on("before-quit",()=>this._isQuitting=!0)}authenticationCompleted(t,e){this.log("electron",__filename+"[authenticationCompleted()] authenticationCompleted called"),this.log("electron",__filename+"[authenticationCompleted()] streamingTokens:",t),this.streamingTokens=t,this.webToken=e,this._webApi=new(ke())({userToken:e.data.Token,uhs:e.data.DisplayClaims.xui[0].uhs}),this._authentication._isAuthenticating=!1,this._authentication._isAuthenticated=!0,this._webApi.getProvider("profile").get("/users/me/profile/settings?settings=GameDisplayName,GameDisplayPicRaw,Gamerscore,Gamertag").then(t=>{if(t.profileUsers.length>0)for(const e in t.profileUsers[0].settings)"Gamertag"===t.profileUsers[0].settings[e].id?this._store.set("user.gamertag",t.profileUsers[0].settings[e].value):"GameDisplayPicRaw"===t.profileUsers[0].settings[e].id?this._store.set("user.gamerpic",t.profileUsers[0].settings[e].value):"Gamerscore"===t.profileUsers[0].settings[e].id&&this._store.set("user.gamerscore",t.profileUsers[0].settings[e].value);this._xboxWorker=new et(this),this._ipc.onUserLoaded()}).catch(t=>{this.log("electron",__filename+"[authenticationCompleted()] Failed to retrieve user profile:",t),k.dialog.showMessageBox({message:"Error: Failed to retrieve user profile:"+o()(t),type:"error"})})}openMainWindow(){this.log("electron",__filename+"[openMainWindow()] Creating new main window");const t=this._store.get("settings",Z);console.log("application.ts settings:",t);const r={title:"XStreaming",backgroundColor:"rgb(26, 27, 30)"};t.fullscreen&&(r.fullscreen=!0),this._mainWindow=N("main",function(t){for(var r=1;r<arguments.length;r++){var n,s,o=null!=arguments[r]?arguments[r]:{};r%2?m()(n=Te(Object(o),!0)).call(n,function(r){e()(t,r,o[r])}):y()?_()(t,y()(o)):m()(s=Te(Object(o))).call(s,function(e){S()(t,e,g()(o,e))})}return t}({width:1280,height:800},r)),t.background_keepalive&&this._mainWindow.webContents.setBackgroundThrottling(!1),this._mainWindow.on("show",()=>{this.log("electron",__filename+"[openMainWindow()] Showing Main window.")}),this._mainWindow.on("close",t=>{!0===this._isMac&&!1===this._isQuitting?(t.preventDefault(),this.log("electron",__filename+"[openMainWindow()] Main windows has been hidden"),this._mainWindow.hide()):(this.log("electron",__filename+"[openMainWindow()] Main windows has been closed"),this._mainWindow=void 0)});const n=t.locale||"en";if(!0===this._isProduction&&!1===this._isCi)this._mainWindow.loadURL(`app://./${n}/home`);else{const t=process.argv[2]||3e3;this._mainWindow.loadURL(`http://localhost:${t}/${n}/home`)}}openGPUWindow(){this._gpuWindow=new k.BrowserWindow({width:800,height:600}),this._gpuWindow.loadURL("chrome://gpu"),this._gpuWindow.webContents.openDevTools()}quit(){k.app.quit()}restart(){this.quit(),k.app.relaunch()}}new Ae})(),d})());
//# sourceMappingURL=background.js.map